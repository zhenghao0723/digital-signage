(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{5424:function(e,t,a){e.exports=a(5654)},5429:function(e,t,a){},5430:function(e,t,a){},5654:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(46),r=a.n(i),o=(a(5429),a(13)),c=a(14),d=a(16),s=a(15),u=a(17),m=(a(5430),a(86)),h=a(55),p=a(225),g=a.n(p),f=a(49),E=a.n(f),v=a(72),b=a(80),C=a(4),y=a.n(C),k=y.a.initializeApp({apiKey:"AIzaSyCT4IE0kDuDZ3X9bHsvvU--xUO-hG93zU0",authDomain:"pgkmedia-607c5.firebaseapp.com",databaseURL:"https://pgkmedia-607c5.firebaseio.com",projectId:"pgkmedia-607c5",storageBucket:"pgkmedia-607c5.appspot.com",messagingSenderId:"518306198801"}),S=a(206),w=a.n(S),O=a(26),x=a(43),F=a.n(x),P=a(8),D=a.n(P),N=a(20),j=a.n(N),T=a(39),A=a.n(T),I=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(d.a)(this,Object(s.a)(t).call(this,e))).onLoad=function(){console.log("capcha successfully loaded")},a.onVerify=function(){a.setState({isVerified:!0})},a.onExpire=function(){a.setState({isVerified:!1})},a.handleSignIn=function(){var e=Object(v.a)(E.a.mark(function e(t){var n,l,i;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!a.state.isVerified){e.next=13;break}return n=a.state,l=n.email,i=n.password,e.prev=3,e.next=6,k.auth().signInWithEmailAndPassword(l,i);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),alert(e.t0);case 11:e.next=14;break;case 13:alert("Please verify that you are a human!");case 14:case"end":return e.stop()}},e,null,[[3,8]])}));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){a.setState({email:e.target.value})},a.passwordhandleChange=function(e){a.setState({password:e.target.value})},a.captcha=null,a.state={isVerified:!1,email:"",password:""},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return l.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"}},l.a.createElement(A.a,{className:e.root,elevation:1},l.a.createElement(j.a,{variant:"h5",className:e.title},"Login"),l.a.createElement("form",{noValidate:!0,autoComplete:"off",onSubmit:this.handleSignIn},l.a.createElement(F.a,{fullWidth:!0,autoFocus:!0,margin:"dense",id:"standard-name",label:"Username",type:"email",className:e.textField,value:this.state.email,onChange:this.handleChange}),l.a.createElement(F.a,{fullWidth:!0,id:"standard-password-input",label:"Password",className:e.textField,type:"password",value:this.state.password,onChange:this.passwordhandleChange,autoComplete:"current-password",margin:"dense"}),l.a.createElement("div",{style:{marginTop:20}},l.a.createElement(w.a,{sitekey:"6Ld1gZ8UAAAAAAav2MZF1t6n77Lw4oDj3HqQYQuh",onVerify:this.onVerify,onExpire:this.onExpire})),l.a.createElement("div",{style:{marginTop:20}},l.a.createElement(D.a,{variant:"outlined",type:"submit",disabled:!this.state.isVerified},"Log in"),l.a.createElement(D.a,{style:{marginLeft:10},variant:"outlined",type:"submit",component:h.b,to:"/digital-signage/register"},"Register")),l.a.createElement(j.a,{style:{marginTop:20},variant:"caption",className:e.title,component:h.b,to:"/digital-signage/forgotpassword"},"Forgot Password"))))}}]),t}(n.Component),B=Object(O.withStyles)(function(e){return{root:Object(b.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,width:300,backgroundColor:"#F4F4F4"}),textField:{marginTop:10},title:{fontWeight:"bold"}}})(I),R=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(d.a)(this,Object(s.a)(t).call(this,e))).handleSignUp=function(){var e=Object(v.a)(E.a.mark(function e(t){var n,l,i;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state,l=n.email,i=n.password,e.prev=2,e.next=5,k.auth().createUserWithEmailAndPassword(l,i);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),alert(e.t0);case 10:case"end":return e.stop()}},e,null,[[2,7]])}));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){a.setState({email:e.target.value})},a.passwordhandleChange=function(e){a.setState({password:e.target.value})},a.state={email:"",password:""},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return l.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"}},l.a.createElement(A.a,{className:e.root,elevation:1},l.a.createElement(j.a,{variant:"h5"},"Sign Up"),l.a.createElement("form",{noValidate:!0,autoComplete:"off",onSubmit:this.handleSignUp},l.a.createElement(F.a,{fullWidth:!0,autoFocus:!0,margin:"dense",id:"standard-name",label:"Username",className:e.textField,value:this.state.email,onChange:this.handleChange,type:"email"}),l.a.createElement(F.a,{fullWidth:!0,id:"standard-password-input",label:"Password",className:e.textField,type:"password",value:this.state.password,onChange:this.passwordhandleChange,autoComplete:"current-password",margin:"dense"}),l.a.createElement(D.a,{style:{marginTop:20},variant:"outlined",type:"submit"},"Sign Up"),l.a.createElement(j.a,{style:{marginTop:20},variant:"caption",className:e.title,component:h.b,to:"/digital-signage"},"Back to Login Page"))))}}]),t}(n.Component),M=Object(O.withStyles)(function(e){return{root:Object(b.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,width:300,backgroundColor:"#F4F4F4"}),textField:{marginTop:10}}})(R),U=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).state={email:"",redirect:!1},a.handleForgotPassword=function(){var e=Object(v.a)(E.a.mark(function e(t){var n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state.email,e.prev=2,e.next=5,k.auth().sendPasswordResetEmail(n).then(function(){a.setState({redirect:!0})});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),alert(e.t0);case 10:case"end":return e.stop()}},e,null,[[2,7]])}));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){a.setState({email:e.target.value})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return this.state.redirect?l.a.createElement(m.a,{to:"/digital-signage"}):l.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"}},l.a.createElement(A.a,{className:e.root,elevation:1},l.a.createElement(j.a,{variant:"h5",className:e.title},"Forgot Password"),l.a.createElement("form",{onSubmit:this.handleForgotPassword},l.a.createElement(F.a,{fullWidth:!0,autoFocus:!0,margin:"dense",id:"standard-name",label:"Email Address",type:"email",className:e.textField,value:this.state.email,onChange:this.handleChange}),l.a.createElement(D.a,{style:{marginTop:20},variant:"outlined",type:"submit",disabled:""===this.state.email},"Send"),l.a.createElement(j.a,{style:{marginTop:20},variant:"caption",className:e.title,component:h.b,to:"/digital-signage"},"Back to Login Page"))))}}]),t}(n.Component),z=Object(O.withStyles)(function(e){return{root:Object(b.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,width:300,backgroundColor:"#F4F4F4"}),textField:{marginTop:10},title:{fontWeight:"bold"}}})(U),W=function(e){function t(){return Object(o.a)(this,t),Object(d.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h2",null,"Dashboard"))}}]),t}(n.Component),L=a(40),_=a(7),q=a.n(_),H=a(63),V=a.n(H),Y=a(64),G=a.n(Y),K=a(9),X=a.n(K),Z=a(61),$=a.n(Z),J=a(65),Q=a.n(J),ee=a(35),te=a.n(ee),ae=a(62),ne=a.n(ae),le=a(42),ie=a.n(le),re=a(41),oe=a.n(re),ce=a(11),de=a.n(ce),se=a(28),ue=a.n(se),me=a(47),he=a(31),pe=a.n(he),ge=a(48),fe=a.n(ge),Ee=a(60),ve=a.n(Ee),be=a(50),Ce=a.n(be),ye=a(51),ke=a.n(ye),Se=a(27),we=a.n(Se),Oe=a(45),xe=a.n(Oe),Fe=a(34),Pe=a.n(Fe),De=a(79),Ne=a.n(De),je=a(58),Te=a.n(je),Ae=a(85),Ie=a.n(Ae),Be=a(108),Re=a.n(Be),Me=a(97),Ue=a.n(Me),ze=a(73),We=a.n(ze);function Le(e){return l.a.createElement(Ie.a,Object.assign({direction:"up"},e))}function _e(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var qe=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.onSelectAllClick,n=t.order,i=t.orderBy,r=t.numSelected,o=t.rowCount,c=t.rows;return l.a.createElement($.a,null,l.a.createElement(te.a,null,l.a.createElement(X.a,{padding:"checkbox"},l.a.createElement(oe.a,{indeterminate:r>0&&r<o,checked:r===o,onChange:a})),c.map(function(t){return l.a.createElement(X.a,{key:t.id,align:t.numeric?"right":"left",padding:t.disablePadding?"none":"default",sortDirection:i===t.id&&n},l.a.createElement(ue.a,{title:"Sort",disableTouchListener:!t.sortable,disableFocusListener:!t.sortable,disableHoverListener:!t.sortable,placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},l.a.createElement(ne.a,{active:!(i!==t.id||!t.sortable),direction:n,onClick:e.createSortHandler(t.id)},t.label)))},this)))}}]),t}(l.a.Component),He=function(e){var t=e.numSelected,a=e.classes,n=e.onDeleteAllClick,i=e.movefile;e.onAddCampaignClick;return l.a.createElement(ie.a,{className:q()(a.root,Object(L.a)({},a.highlight,t>0))},l.a.createElement("div",{className:a.title},t>0?l.a.createElement(j.a,{color:"inherit",variant:"subtitle1"},t," selected"):l.a.createElement(j.a,{variant:"h6",id:"tableTitle"})),l.a.createElement("div",{className:a.spacer}),l.a.createElement("div",{className:a.actions},t>0?i?l.a.createElement("div",{style:{display:"flex",alignItems:"center"}},l.a.createElement(ue.a,{title:"Delete"},l.a.createElement(de.a,{"aria-label":"Delete",onClick:n},l.a.createElement(pe.a,null)))):l.a.createElement(ue.a,{title:"Delete"},l.a.createElement(de.a,{"aria-label":"Delete",onClick:n},l.a.createElement(pe.a,null))):l.a.createElement("div",null)))};He=Object(O.withStyles)(function(e){return{root:{paddingRight:e.spacing.unit},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(me.lighten)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"}}})(He);function Ve(e){var t=e.children,a=e.dir;return l.a.createElement("div",{dir:a},t)}var Ye=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).state={order:"desc",orderBy:a.props.orderBy,selected:[],selectedId:"",page:0,rowsPerPage:5,openDialog:!1,dialogTitle:"No Title",folderId:"",folderName:"",dialogOption:"",selectedFileName:"",dialogFullscreen:!1,value:0},a.handleRequestSort=function(e,t){var n=t,l="desc";a.state.orderBy===t&&"desc"===a.state.order&&(l="asc"),a.setState({order:l,orderBy:n})},a.handleSelectAllClick=function(e){e.target.checked?a.setState({selected:a.props.data.map(function(e){return e.id})}):a.setState({selected:[]})},a.handleClick=function(e,t){var n=a.state.selected,l=n.indexOf(t),i=[];-1===l?i=i.concat(n,t):0===l?i=i.concat(n.slice(1)):l===n.length-1?i=i.concat(n.slice(0,-1)):l>0&&(i=i.concat(n.slice(0,l),n.slice(l+1))),a.setState({selected:i})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a.bytesToSize=function(e){if(0===e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]},a.onAddCampaignClick=function(){},a.onEditClick=function(e){},a.onDeleteClick=function(e){a.setState({openDialog:!0,dialogTitle:"Remove Campaign",selectedId:e,dialogOption:"delete",dialogFullscreen:!1})},a.onPreviewClick=function(e){},a.onDeleteAllClick=function(){a.setState({openDialog:!0,dialogOption:"deleteAll",dialogTitle:"Remove Campaign",dialogFullscreen:!1})},a.handleClose=function(){a.setState({openDialog:!1})},a._handleEditFileNameChange=function(e){a.setState({selectedFileName:e.target.value})},a.handleSelectionChange=function(e){a.setState({selectedFolder:e.target.value})},a.handleEditFile=function(){y.a.database().ref().child("/media_folder/"+a.state.selectedId).update({name:a.state.selectedFileName}),a.setState({openDialog:!1,selectedFolder:"default",selectedFileName:"",selected:[]})},a.handleRemoveFile=function(){y.a.database().ref(a.props.dataName).child(a.state.selectedId).remove(),a.setState({openDialog:!1,selectedId:"",selected:[]})},a.handleRemoveAllFile=function(){a.state.selected.forEach(function(e){y.a.database().ref(a.props.dataName).child(e).remove()}),a.setState({openDialog:!1,selected:[]})},a.renderDialog=function(){return"delete"===a.state.dialogOption?l.a.createElement("div",null,l.a.createElement(we.a,null,l.a.createElement(xe.a,{id:"alert-dialog-description"},"Are you sure you want to permanently delete these campaign?")),l.a.createElement(Pe.a,null,l.a.createElement(D.a,{onClick:a.handleRemoveFile,color:"default"},"Yes"),l.a.createElement(D.a,{color:"primary",onClick:a.handleClose},"No"))):"deleteAll"===a.state.dialogOption?l.a.createElement("div",null,l.a.createElement(we.a,null,l.a.createElement(xe.a,{id:"alert-dialog-description"},"Are you sure you want to permanently delete these campaign?")),l.a.createElement(Pe.a,null,l.a.createElement(D.a,{onClick:a.handleRemoveAllFile,color:"default"},"Yes"),l.a.createElement(D.a,{color:"primary",onClick:a.handleClose},"No"))):void 0},a.handleTabsChange=function(e,t){a.setState({value:t})},a.handleTabsChangeIndex=function(e){a.setState({value:e})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.rows,i=t.data,r=t.theme,o=this.state,c=o.order,d=o.orderBy,s=o.selected,u=o.rowsPerPage,m=o.page,h=u-Math.min(u,i.length-m*u);return l.a.createElement("div",{className:a.root},l.a.createElement(Te.a,{className:a.AppBar,position:"static",color:"default"},l.a.createElement(Ue.a,{value:this.state.value,onChange:this.handleTabsChange,indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},l.a.createElement(We.a,{disableRipple:!0,label:"Station List"}),l.a.createElement(We.a,{disableRipple:!0,label:"Create Station"}))),l.a.createElement(Ce.a,{fullScreen:this.state.dialogFullscreen,onClose:this.handleClose,"aria-labelledby":"customized-dialog-title",open:this.state.openDialog,maxWidth:"xl",TransitionComponent:Le},this.state.dialogFullscreen?l.a.createElement(Te.a,{className:a.appBar},l.a.createElement(ie.a,null,l.a.createElement(de.a,{color:"inherit",onClick:this.handleClose,"aria-label":"Close"},l.a.createElement(Ne.a,null)),l.a.createElement(j.a,{variant:"h6",color:"inherit",className:a.flex},this.state.dialogTitle),l.a.createElement(D.a,{color:"inherit",onClick:this.handleClose},"save"))):l.a.createElement(ke.a,{id:"customized-dialog-title",onClose:this.handleClose},this.state.dialogTitle),this.renderDialog()),l.a.createElement(Re.a,{axis:"rtl"===r.direction?"x-reverse":"x",index:this.state.value},l.a.createElement(Ve,{dir:r.direction},l.a.createElement(He,{numSelected:s.length,onDeleteAllClick:this.onDeleteAllClick,movefile:this.props.movefile,onAddCampaignClick:this.onAddCampaignClick}),l.a.createElement("div",{className:a.tableWrapper},l.a.createElement(V.a,{className:a.table,"aria-labelledby":"tableTitle"},l.a.createElement(qe,{numSelected:s.length,order:c,orderBy:d,onSelectAllClick:this.handleSelectAllClick,onRequestSort:this.handleRequestSort,rowCount:i.length,rows:n}),l.a.createElement(G.a,null,function(e,t){var a=e.map(function(e,t){return[e,t]});return a.sort(function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]}),a.map(function(e){return e[0]})}(i,function(e,t){return"desc"===e?function(e,a){return _e(e,a,t)}:function(e,a){return-_e(e,a,t)}}(c,d)).slice(m*u,m*u+u).map(function(t){var i=e.isSelected(t.id);return l.a.createElement(te.a,{hover:!0,role:"checkbox","aria-checked":i,tabIndex:-1,key:t.id,selected:i},l.a.createElement(X.a,{onClick:function(a){return e.handleClick(a,t.id)},padding:"checkbox"},l.a.createElement(oe.a,{checked:i})),n.map(function(n){return n.action?l.a.createElement(X.a,{key:n.id,align:"left",padding:"none"},l.a.createElement("div",{className:a.actionButtons},l.a.createElement(de.a,{color:t.total>0?"primary":"default",disabled:!(t.total>0),onClick:function(){return e.onPreviewClick(t.id)}},l.a.createElement(ve.a,{fontSize:"small"})),l.a.createElement(de.a,{onClick:function(){return e.onEditClick(t.id)}},l.a.createElement(fe.a,{fontSize:"small"})),l.a.createElement(de.a,{onClick:function(){return e.onDeleteClick(t.id)}},l.a.createElement(pe.a,{fontSize:"small"})))):"created"===n.id?l.a.createElement(X.a,{key:n.id,onClick:function(a){return e.handleClick(a,t.id)},align:"left",padding:"default"},new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(t[n.id])):"template"===n.id?l.a.createElement(X.a,{key:n.id,onClick:function(a){return e.handleClick(a,t.id)},align:"left",padding:"default"},t.template_name):l.a.createElement(X.a,{key:n.id,onClick:function(a){return e.handleClick(a,t.id)},align:"left",padding:"default"},t[n.id])}))}),h>0&&l.a.createElement(te.a,{style:{height:49*h}},l.a.createElement(X.a,{colSpan:6}))))),l.a.createElement(Q.a,{rowsPerPageOptions:[5,10,25],component:"div",count:i.length,rowsPerPage:u,page:m,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage})),l.a.createElement(Ve,{dir:r.direction})))}}]),t}(l.a.Component),Ge=Object(O.withStyles)(function(e){return{root:{width:"100%"},table:{minWidth:1020},tableWrapper:{overflowX:"auto"},actionButtons:{display:"flex"},appBar:{position:"relative"},flex:{flex:1},AppBar:{boxShadow:"none",borderBottom:"1px solid #e8e8e8"}}},{withTheme:!0})(Ye),Ke=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).state={stationData:[]},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this;y.a.database().ref("station").on("value",function(t){var a=[];t.forEach(function(e){var t=e.val();t.key=e.key,a.push({id:t.key,name:t.name,created:t.created})}),e.setState({stationData:a})})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(Ge,{rows:[{id:"name",numeric:!1,disablePadding:!1,label:"Station Name",sortable:!0},{id:"created",numeric:!1,disablePadding:!1,label:"Created by",sortable:!0},{id:"action",numeric:!1,disablePadding:!1,sortable:!1,action:!0}],data:this.state.stationData,orderBy:"created",movefile:!1,dataName:"station"}))}}]),t}(n.Component),Xe=a(209),Ze=a.n(Xe),$e=a(210),Je=a.n($e),Qe=a(211),et=a.n(Qe),tt=Object(O.withStyles)({root:{border:"1px solid rgba(0,0,0,.125)",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}},expanded:{margin:"auto"}})(Ze.a),at=Object(O.withStyles)({root:{backgroundColor:"rgba(0,0,0,.03)",borderBottom:"1px solid rgba(0,0,0,.125)",marginBottom:-1,minHeight:56,"&$expanded":{minHeight:56}},content:{"&$expanded":{margin:"12px 0"}},expanded:{}})(function(e){return l.a.createElement(Je.a,e)});at.muiName="ExpansionPanelSummary";var nt=Object(O.withStyles)(function(e){return{root:{padding:2*e.spacing.unit}}})(et.a),lt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).state={expanded:"panel0"},a.handleChange=function(e){return function(t,n){a.setState({expanded:!!n&&e})}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.expanded;return l.a.createElement("div",null,this.props.panel.map(function(a,n){return l.a.createElement(tt,{key:n,square:!0,expanded:t==="panel"+n,onChange:e.handleChange("panel"+n)},l.a.createElement(at,null,l.a.createElement(j.a,null,a.name)),l.a.createElement(nt,{style:{padding:0}},a.content))}))}}]),t}(l.a.Component),it=a(66),rt=a(212),ot=a(226),ct=a(214),dt=a.n(ct),st=a(32);function ut(){var e=Object(rt.a)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n  border-width: 2px;\n  border-radius: 2px;\n  border-color: ",";\n  border-style: dashed;\n  background-color: #fafafa;\n  color: #bdbdbd;\n  outline: none;\n  transition: border .24s ease-in-out;\n"]);return ut=function(){return e},e}var mt=a(215).a.div(ut(),function(e){return ht(e)}),ht=function(e){return e.isDragAccept?"#00e676":e.isDragReject?"#ff1744":e.isDragActive?"#2196f3":"#eeeeee"},pt={display:"inline-flex",borderRadius:2,border:"1px solid #eaeaea",marginBottom:8,marginRight:8,width:100,height:100,padding:4,boxSizing:"border-box",justifyContent:"center"},gt={display:"flex",minWidth:0,overflow:"hidden",alignItems:"center"},ft=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).state={isUploading:!1,uploadProgress:0,filenames:[],downloadURLs:[],files:[]},a.handleUploadStart=function(){a.setState({isUploading:!0,uploadProgress:0})},a.handleUploadProgress=function(e){a.setState({uploadProgress:e})},a.handleUploadError=function(e){a.setState({isUploading:!1}),alert(e)},a.handleUploadSuccess=function(){var e=Object(v.a)(E.a.mark(function e(t){var n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.storage().ref("media").child(t).getDownloadURL();case 2:return n=e.sent,e.next=5,y.a.storage().ref("media").child(t);case 5:e.sent.getMetadata().then(function(e){var t={name:e.name,imageUrl:n,size:e.size,created:y.a.database.ServerValue.TIMESTAMP,type:e.contentType,fullPath:e.fullPath,folder:"default"},a={};a["/media/"+y.a.database().ref().child("media").push().key]=t,y.a.database().ref().update(a)}).catch(function(e){}),a.setState(function(e){return{filenames:[].concat(Object(it.a)(e.filenames),[t]),downloadURLs:[].concat(Object(it.a)(e.downloadURLs),[n]),uploadProgress:100,isUploading:!1,files:[]}});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.customOnChangeHandler=function(e){var t=e.target.files,n=[];Array.from(t).forEach(function(e){return n.push(e)}),a.setState({files:n})},a.startUploadManually=function(){a.setState({isUploading:!0});var e=a.state.files;Array.from(e).forEach(function(e){a.fileUploader.startUpload(e)})},a.onClearFileList=function(){a.setState({files:[]})},a.onDrop=function(e){a.setState({files:e})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{style:{marginBottom:20}},l.a.createElement(dt.a,{accept:"image/png, image/jpeg, video/mp4",name:"image-uploader-multiple",randomizeFilename:!0,storageRef:y.a.storage().ref("media"),onUploadStart:this.handleUploadStart,onUploadError:this.handleUploadError,onUploadSuccess:this.handleUploadSuccess,onProgress:this.handleUploadProgress,onChange:this.customOnChangeHandler,ref:function(t){e.fileUploader=t},multiple:!0,hidden:!0}),l.a.createElement(ot.a,{disabled:this.state.isUploading,multiple:!0,onDrop:this.onDrop,accept:"image/png, image/jpeg, video/mp4",minSize:0,maxSize:45428800},function(t){var a=t.getRootProps,n=t.getInputProps,i=t.isDragActive,r=t.isDragAccept,o=t.isDragReject,c=t.rejectedFiles;return l.a.createElement("div",null,l.a.createElement(mt,a({isDragActive:i,isDragAccept:r,isDragReject:o,rejectedFiles:c}),l.a.createElement("input",n()),i?"Drop the files here":"Drag and drop some files here, or click to select files"),l.a.createElement("aside",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:16}},e.state.files.map(function(e){return"video/mp4"===e.type?l.a.createElement("div",{style:pt,key:e.name},l.a.createElement("div",{style:gt},l.a.createElement(st.f,{style:{fontSize:50,color:"#b4b4b4"}}))):l.a.createElement("div",{style:pt,key:e.name},l.a.createElement("div",{style:gt},l.a.createElement("img",{alt:e.name,src:URL.createObjectURL(e),style:{display:"block",width:"auto",height:"100%"}})))})),l.a.createElement("div",{style:{display:"inline-flex"}},l.a.createElement(D.a,{onClick:e.startUploadManually,disabled:!(e.state.files.length>0&&!e.state.isUploading),variant:"outlined",color:"primary"},"Upload"),l.a.createElement(D.a,{onClick:e.onClearFileList,disabled:!(e.state.files.length>0&&!e.state.isUploading),variant:"outlined",color:"primary",style:{marginLeft:8}},"Clear"),c.length>0&&l.a.createElement("div",{style:{marginTop:8,color:"#fa3b56",fontSize:12,marginLeft:8,alignItems:"bottom"}},c.length," files has been rejected.")))}))}}]),t}(n.Component),Et=a(53),vt=a.n(Et),bt=a(57),Ct=a.n(bt),yt=a(52),kt=a.n(yt),St=a(56),wt=a.n(St),Ot=a(38),xt=a.n(Ot),Ft=a(74),Pt=a.n(Ft),Dt=a(69),Nt=a.n(Dt);function jt(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var Tt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.onSelectAllClick,n=t.order,i=t.orderBy,r=t.numSelected,o=t.rowCount,c=t.rows;return l.a.createElement($.a,null,l.a.createElement(te.a,null,l.a.createElement(X.a,{padding:"checkbox"},l.a.createElement(oe.a,{indeterminate:r>0&&r<o,checked:r===o,onChange:a})),c.map(function(t){return l.a.createElement(X.a,{key:t.id,align:t.numeric?"right":"left",padding:t.disablePadding?"none":"default",sortDirection:i===t.id&&n},l.a.createElement(ue.a,{title:"Sort",disableTouchListener:!t.sortable,disableFocusListener:!t.sortable,disableHoverListener:!t.sortable,placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},l.a.createElement(ne.a,{active:!(i!==t.id||!t.sortable),direction:n,onClick:e.createSortHandler(t.id)},t.label)))},this)))}}]),t}(l.a.Component),At=function(e){var t=e.folderSelection,a=e.select,n=e.numSelected,i=e.classes,r=e.onMoveAllClick,o=e.onDeleteAllClick,c=e.movefile,d=e.onAddMediaClick,s=e.currentFolder,u=e.handleFolderChange,m=e.folderCollection;return l.a.createElement(ie.a,{className:q()(i.root,Object(L.a)({},i.highlight,n>0))},l.a.createElement("div",{className:i.title},n>0?l.a.createElement(j.a,{color:"inherit",variant:"subtitle1"},n," selected"):t?l.a.createElement(vt.a,{fullWidth:!0,variant:"outlined"},l.a.createElement(Ct.a,{htmlFor:"outlined-age-simple"},"Folder"),l.a.createElement(kt.a,{value:s,onChange:u,input:l.a.createElement(wt.a,{labelWidth:100,name:"folder",id:"outlined-age-simple"})},l.a.createElement(xt.a,{value:"default"},l.a.createElement("em",null,"Default")),m.map(function(e){return l.a.createElement(xt.a,{key:e.id,value:e.id},e.name)}))):l.a.createElement("div",null)),l.a.createElement("div",{className:i.spacer}),l.a.createElement("div",{className:i.actions},n>0?c?l.a.createElement("div",{style:{display:"flex",alignItems:"center"}},a?l.a.createElement(ue.a,{title:"select"},l.a.createElement(D.a,{onClick:d,color:"primary"},"Select")):l.a.createElement("div",null),l.a.createElement(ue.a,{title:"Move"},l.a.createElement(de.a,{"aria-label":"Move",onClick:r},l.a.createElement(st.k,null))),l.a.createElement(ue.a,{title:"Delete"},l.a.createElement(de.a,{"aria-label":"Delete",onClick:o},l.a.createElement(pe.a,null)))):l.a.createElement(ue.a,{title:"Delete"},l.a.createElement(de.a,{"aria-label":"Delete",onClick:o},l.a.createElement(pe.a,null))):l.a.createElement("div",null)))};At=Object(O.withStyles)(function(e){return{root:{paddingRight:e.spacing.unit},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(me.lighten)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"}}})(At);var It=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).state={order:"desc",orderBy:a.props.orderBy,selected:[],selectedId:"",page:0,rowsPerPage:5,openDialog:!1,dialogTitle:"No Title",dialogUrl:null,dialogType:null,dialogOption:"",selectedFileName:"",selectedFolder:"default",data:[],currentFolder:"default"},a.handleRequestSort=function(e,t){var n=t,l="desc";a.state.orderBy===t&&"desc"===a.state.order&&(l="asc"),a.setState({order:l,orderBy:n})},a.handleSelectAllClick=function(e){e.target.checked?a.setState({selected:a.state.data.map(function(e){return e.id})}):a.setState({selected:[]})},a.handleClick=function(e,t){var n=a.state.selected,l=n.indexOf(t),i=[];-1===l?i=i.concat(n,t):0===l?i=i.concat(n.slice(1)):l===n.length-1?i=i.concat(n.slice(0,-1)):l>0&&(i=i.concat(n.slice(0,l),n.slice(l+1))),a.setState({selected:i})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a.bytesToSize=function(e){if(0===e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]},a.onPreviewClick=function(e,t,n){a.setState({openDialog:!0,dialogTitle:t,dialogUrl:n,dialogType:e,dialogOption:"preview"})},a.onEditClick=function(e,t){a.setState({openDialog:!0,dialogTitle:"Edit file",selectedId:e,dialogOption:"edit",selectedFileName:t,selectedFolder:"default"})},a.onDeleteClick=function(e){a.setState({openDialog:!0,dialogTitle:"Remove file",selectedId:e,dialogOption:"delete"})},a.onDeleteAllClick=function(){a.setState({openDialog:!0,dialogOption:"deleteAll",dialogTitle:"Remove file"})},a.onMoveAllClick=function(){a.setState({openDialog:!0,dialogOption:"moveAll",dialogTitle:"Move file",selectedFolder:"default"})},a.handleClose=function(){a.setState({openDialog:!1})},a._handleEditFileNameChange=function(e){a.setState({selectedFileName:e.target.value})},a.handleSelectionChange=function(e){a.setState({selectedFolder:e.target.value})},a.handleEditFile=function(){y.a.database().ref().child("/media/"+a.state.selectedId).update({name:a.state.selectedFileName,folder:a.state.selectedFolder}),"default"!==a.state.selectedFolder&&y.a.database().ref().child("/media_folder/"+a.state.selectedFolder).child("total").transaction(function(e){return e+1}),a.setState({openDialog:!1,selectedFolder:"default",selectedFileName:"",selected:[]})},a.handleRemoveFile=function(){y.a.database().ref(a.props.dataName).child(a.state.selectedId).once("value",function(e){var t=e.val();y.a.database().ref(a.props.dataName).child(a.state.selectedId).remove().then(function(){y.a.storage().ref().child(t.fullPath).delete()})}),a.setState({openDialog:!1,selectedId:"",selected:[]})},a.handleRemoveAllFile=function(){a.state.selected.forEach(function(e){y.a.database().ref(a.props.dataName).child(e).once("value",function(t){var n=t.val();y.a.database().ref(a.props.dataName).child(e).remove().then(function(){y.a.storage().ref().child(n.fullPath).delete()})})}),a.setState({openDialog:!1,selected:[]})},a.handleMoveAllFile=function(){"default"!==a.state.selectedFolder&&a.state.selected.forEach(function(e){y.a.database().ref().child("/media/"+e).update({folder:a.state.selectedFolder}),y.a.database().ref().child("/media_folder/"+a.state.selectedFolder).child("total").transaction(function(e){return e+1})}),a.setState({openDialog:!1,selectedFolder:"default",selected:[]})},a.renderDialog=function(){return"preview"===a.state.dialogOption?l.a.createElement(we.a,{style:{maxWidth:500,maxHeight:500,marginTop:20}},"video/mp4"===a.state.dialogType?l.a.createElement(Pt.a,{width:"100%",height:"100%",playing:!0,url:a.state.dialogUrl}):l.a.createElement(Nt.a,{frameWidth:"450px",frameHeight:"450px",imgSize:"contain",imgSrc:a.state.dialogUrl})):"edit"===a.state.dialogOption?l.a.createElement("div",null,l.a.createElement(we.a,null,l.a.createElement(F.a,{margin:"dense",id:"name",label:"File Name",fullWidth:!0,value:a.state.selectedFileName,onChange:a._handleEditFileNameChange}),l.a.createElement(vt.a,{style:{marginTop:20},fullWidth:!0,variant:"outlined",noValidate:!0,autoComplete:"off"},l.a.createElement(Ct.a,{ref:function(e){a.InputLabelRef=e},htmlFor:"outlined-age-simple"},"Folder"),l.a.createElement(kt.a,{value:a.state.selectedFolder,onChange:a.handleSelectionChange,input:l.a.createElement(wt.a,{labelWidth:100,name:"folder",id:"outlined-age-simple"})},l.a.createElement(xt.a,{value:"default"},l.a.createElement("em",null,"Default")),a.props.folderCollection.map(function(e){return l.a.createElement(xt.a,{key:e.id,value:e.id},e.name)})))),l.a.createElement(Pe.a,null,l.a.createElement(D.a,{onClick:a.handleEditFile,color:"primary"},"Submit"),l.a.createElement(D.a,{onClick:a.handleClose,color:"default"},"Cancel"))):"delete"===a.state.dialogOption?l.a.createElement("div",null,l.a.createElement(we.a,null,l.a.createElement(xe.a,{id:"alert-dialog-description"},"Are you sure you want to permanently delete these file?")),l.a.createElement(Pe.a,null,l.a.createElement(D.a,{onClick:a.handleRemoveFile,color:"default"},"Yes"),l.a.createElement(D.a,{color:"primary",onClick:a.handleClose},"No"))):"deleteAll"===a.state.dialogOption?l.a.createElement("div",null,l.a.createElement(we.a,null,l.a.createElement(xe.a,{id:"alert-dialog-description"},"Are you sure you want to permanently delete these file?")),l.a.createElement(Pe.a,null,l.a.createElement(D.a,{onClick:a.handleRemoveAllFile,color:"default"},"Yes"),l.a.createElement(D.a,{color:"primary",onClick:a.handleClose},"No"))):"moveAll"===a.state.dialogOption?l.a.createElement("div",null,l.a.createElement(we.a,{style:{width:200}},l.a.createElement(vt.a,{style:{marginTop:20},fullWidth:!0,variant:"outlined",noValidate:!0,autoComplete:"off"},l.a.createElement(Ct.a,{ref:function(e){a.InputLabelRef=e},htmlFor:"outlined-age-simple"},"Folder"),l.a.createElement(kt.a,{value:a.state.selectedFolder,onChange:a.handleSelectionChange,input:l.a.createElement(wt.a,{labelWidth:100,name:"folder",id:"outlined-age-simple"})},l.a.createElement(xt.a,{value:"default"},l.a.createElement("em",null,"Default")),a.props.folderCollection.map(function(e){return l.a.createElement(xt.a,{key:e.id,value:e.id},e.name)})))),l.a.createElement(Pe.a,null,l.a.createElement(D.a,{onClick:a.handleMoveAllFile,color:"primary"},"Yes"),l.a.createElement(D.a,{onClick:a.handleClose,color:"primary",autoFocus:!0},"No"))):void 0},a.handleFolderChange=function(e){y.a.database().ref("media").on("value",function(t){var n=[];t.forEach(function(t){var a=t.val();a.key=t.key,a.folder===e.target.value&&n.push({id:a.key,name:a.name,imageUrl:a.imageUrl,created:a.created,type:a.type,size:a.size,folder:a.folder})}),a.setState({data:n,currentFolder:e.target.value})})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this;y.a.database().ref("media").on("value",function(t){var a=[];t.forEach(function(t){var n=t.val();n.key=t.key,n.folder===e.state.currentFolder&&a.push({id:n.key,name:n.name,imageUrl:n.imageUrl,created:n.created,type:n.type,size:n.size,folder:n.folder})}),e.setState({data:a})})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.rows,i=this.state,r=i.data,o=i.order,c=i.orderBy,d=i.selected,s=i.rowsPerPage,u=i.page,m=s-Math.min(s,r.length-u*s);return l.a.createElement("div",{className:a.root},l.a.createElement(Ce.a,{onClose:this.handleClose,"aria-labelledby":"customized-dialog-title",open:this.state.openDialog,maxWidth:"xl"},"preview"!==this.state.dialogOption?l.a.createElement(ke.a,{id:"customized-dialog-title",onClose:this.handleClose},this.state.dialogTitle):l.a.createElement("div",null),this.renderDialog()),l.a.createElement(At,{folderSelection:this.props.folderSelection,numSelected:d.length,onDeleteAllClick:this.onDeleteAllClick,onMoveAllClick:this.onMoveAllClick,movefile:this.props.movefile,select:this.props.select,onAddMediaClick:function(){return e.props.onAddMediaClick(e.state.selected)},currentFolder:this.state.currentFolder,handleFolderChange:this.handleFolderChange,folderCollection:this.props.folderCollection}),l.a.createElement("div",{className:a.tableWrapper},l.a.createElement(V.a,{className:a.table,"aria-labelledby":"tableTitle"},l.a.createElement(Tt,{numSelected:d.length,order:o,orderBy:c,onSelectAllClick:this.handleSelectAllClick,onRequestSort:this.handleRequestSort,rowCount:r.length,rows:n}),l.a.createElement(G.a,null,function(e,t){var a=e.map(function(e,t){return[e,t]});return a.sort(function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]}),a.map(function(e){return e[0]})}(r,function(e,t){return"desc"===e?function(e,a){return jt(e,a,t)}:function(e,a){return-jt(e,a,t)}}(o,c)).slice(u*s,u*s+s).map(function(t){var i=e.isSelected(t.id);return l.a.createElement(te.a,{hover:!0,role:"checkbox","aria-checked":i,tabIndex:-1,key:t.id,selected:i},l.a.createElement(X.a,{onClick:function(a){return e.handleClick(a,t.id)},padding:"checkbox"},l.a.createElement(oe.a,{checked:i})),n.map(function(n){return n.thumbnail?l.a.createElement(X.a,{key:n.id,onClick:function(a){return e.handleClick(a,t.id)},align:"left",padding:"default"},"video/mp4"===t.type?l.a.createElement("div",{style:{height:50}},l.a.createElement(st.f,{style:{fontSize:50,color:"#b4b4b4"}})):l.a.createElement("img",{style:{height:50},src:t.imageUrl,alt:""})):n.action?e.props.preview?l.a.createElement(X.a,{key:n.id,align:"left",padding:"none"},l.a.createElement("div",{className:a.actionButtons},l.a.createElement(de.a,{color:"primary",onClick:function(){return e.onPreviewClick(t.type,t.name,t.imageUrl)}},l.a.createElement(ve.a,{fontSize:"small"})),l.a.createElement(de.a,{onClick:function(){return e.onEditClick(t.id,t.name)}},l.a.createElement(fe.a,{fontSize:"small"})),l.a.createElement(de.a,{onClick:function(){return e.onDeleteClick(t.id)}},l.a.createElement(pe.a,{fontSize:"small"})))):l.a.createElement(X.a,{key:n.id,align:"left",padding:"none"},l.a.createElement("div",{className:a.actionButtons},l.a.createElement(de.a,{onClick:function(){return e.onEditClick(t.id,t.name)}},l.a.createElement(fe.a,{fontSize:"small"})),l.a.createElement(de.a,{onClick:function(){return e.onDeleteClick(t.id)}},l.a.createElement(pe.a,{fontSize:"small"})))):"size"===n.id?l.a.createElement(X.a,{key:n.id,onClick:function(a){return e.handleClick(a,t.id)},align:"left",padding:"default"},e.bytesToSize(t[n.id])):"created"===n.id?l.a.createElement(X.a,{key:n.id,onClick:function(a){return e.handleClick(a,t.id)},align:"left",padding:"default"},new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(t[n.id])):l.a.createElement(X.a,{key:n.id,onClick:function(a){return e.handleClick(a,t.id)},align:"left",padding:"default"},t[n.id])}))}),m>0&&l.a.createElement(te.a,{style:{height:49*m}},l.a.createElement(X.a,{colSpan:6}))))),l.a.createElement(Q.a,{rowsPerPageOptions:[5,10,25],component:"div",count:r.length,rowsPerPage:s,page:u,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),t}(l.a.Component),Bt=Object(O.withStyles)(function(e){return{root:{width:"100%"},table:{minWidth:1020},tableWrapper:{overflowX:"auto"},actionButtons:{display:"flex"}}})(It),Rt=a(123),Mt=a.n(Rt);function Ut(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var zt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.onSelectAllClick,n=t.order,i=t.orderBy,r=t.numSelected,o=t.rowCount,c=t.rows;return l.a.createElement($.a,null,l.a.createElement(te.a,null,l.a.createElement(X.a,{padding:"checkbox"},l.a.createElement(oe.a,{indeterminate:r>0&&r<o,checked:r===o,onChange:a})),c.map(function(t){return l.a.createElement(X.a,{key:t.id,align:t.numeric?"right":"left",padding:t.disablePadding?"none":"default",sortDirection:i===t.id&&n},l.a.createElement(ue.a,{title:"Sort",disableTouchListener:!t.sortable,disableFocusListener:!t.sortable,disableHoverListener:!t.sortable,placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},l.a.createElement(ne.a,{active:!(i!==t.id||!t.sortable),direction:n,onClick:e.createSortHandler(t.id)},t.label)))},this)))}}]),t}(l.a.Component),Wt=function(e){var t=e.numSelected,a=e.classes,n=e.onMoveAllClick,i=e.onDeleteAllClick,r=e.movefile;return l.a.createElement(ie.a,{className:q()(a.root,Object(L.a)({},a.highlight,t>0))},l.a.createElement("div",{className:a.title},t>0?l.a.createElement(j.a,{color:"inherit",variant:"subtitle1"},t," selected"):l.a.createElement(j.a,{variant:"h6",id:"tableTitle"})),l.a.createElement("div",{className:a.spacer}),l.a.createElement("div",{className:a.actions},t>0?r?l.a.createElement("div",{style:{display:"flex",alignItems:"center"}},l.a.createElement(ue.a,{title:"Move"},l.a.createElement(de.a,{"aria-label":"Move",onClick:n},l.a.createElement(st.k,null))),l.a.createElement(ue.a,{title:"Delete"},l.a.createElement(de.a,{"aria-label":"Delete",onClick:i},l.a.createElement(pe.a,null)))):l.a.createElement(ue.a,{title:"Delete"},l.a.createElement(de.a,{"aria-label":"Delete",onClick:i},l.a.createElement(pe.a,null))):l.a.createElement("div",null)))};Wt=Object(O.withStyles)(function(e){return{root:{paddingRight:e.spacing.unit},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(me.lighten)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"}}})(Wt);var Lt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).state={order:"desc",orderBy:a.props.orderBy,selected:[],selectedId:"",page:0,rowsPerPage:5,openDialog:!1,dialogTitle:"No Title",dialogUrl:null,dialogType:null,dialogOption:"",selectedFileName:"",selectedFolder:a.props.selectedFolder},a.handleRequestSort=function(e,t){var n=t,l="desc";a.state.orderBy===t&&"desc"===a.state.order&&(l="asc"),a.setState({order:l,orderBy:n})},a.handleSelectAllClick=function(e){e.target.checked?a.setState({selected:a.props.data.map(function(e){return e.id})}):a.setState({selected:[]})},a.handleClick=function(e,t){var n=a.state.selected,l=n.indexOf(t),i=[];-1===l?i=i.concat(n,t):0===l?i=i.concat(n.slice(1)):l===n.length-1?i=i.concat(n.slice(0,-1)):l>0&&(i=i.concat(n.slice(0,l),n.slice(l+1))),a.setState({selected:i})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a.bytesToSize=function(e){if(0===e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]},a.onPreviewClick=function(e,t,n){a.setState({openDialog:!0,dialogTitle:t,dialogUrl:n,dialogType:e,dialogOption:"preview"})},a.onEditClick=function(e,t){a.setState({openDialog:!0,dialogTitle:"Edit file",selectedId:e,dialogOption:"edit",selectedFileName:t,selectedFolder:a.props.selectedFolder})},a.onDeleteClick=function(e){a.setState({openDialog:!0,dialogTitle:"Remove file",selectedId:e,dialogOption:"delete"})},a.onDeleteAllClick=function(){a.setState({openDialog:!0,dialogOption:"deleteAll",dialogTitle:"Remove file"})},a.onMoveAllClick=function(){a.setState({openDialog:!0,dialogOption:"moveAll",dialogTitle:"Move file",selectedFolder:a.props.selectedFolder})},a.handleClose=function(){a.setState({openDialog:!1})},a._handleEditFileNameChange=function(e){a.setState({selectedFileName:e.target.value})},a.handleSelectionChange=function(e){a.setState({selectedFolder:e.target.value})},a.handleEditFile=function(){y.a.database().ref().child("/media/"+a.state.selectedId).update({name:a.state.selectedFileName,folder:a.state.selectedFolder}),a.state.selectedFolder!==a.props.selectedFolder&&("default"!==a.state.selectedFolder&&y.a.database().ref().child("/media_folder/"+a.state.selectedFolder).child("total").transaction(function(e){return e+1}),y.a.database().ref().child("/media_folder/"+a.props.selectedFolder).child("total").transaction(function(e){return e-1})),a.setState({openDialog:!1,selectedFolder:a.props.selectedFolder,selectedFileName:"",selected:[]})},a.handleRemoveFile=function(){y.a.database().ref(a.props.dataName).child(a.state.selectedId).once("value",function(e){var t=e.val();y.a.database().ref(a.props.dataName).child(a.state.selectedId).remove().then(function(){y.a.storage().ref().child(t.fullPath).delete()})}),a.setState({openDialog:!1,selectedId:"",selected:[]})},a.handleRemoveAllFile=function(){a.state.selected.forEach(function(e){y.a.database().ref(a.props.dataName).child(e).once("value",function(t){var n=t.val();y.a.database().ref(a.props.dataName).child(e).remove().then(function(){y.a.storage().ref().child(n.fullPath).delete()})})}),a.setState({openDialog:!1,selected:[]})},a.handleMoveAllFile=function(){a.state.selectedFolder!==a.props.selectedFolder&&a.state.selected.forEach(function(e){y.a.database().ref().child("/media/"+e).update({folder:a.state.selectedFolder}),"default"!==a.state.selectedFolder&&y.a.database().ref().child("/media_folder/"+a.state.selectedFolder).child("total").transaction(function(e){return e+1}),y.a.database().ref().child("/media_folder/"+a.props.selectedFolder).child("total").transaction(function(e){return e-1})}),a.setState({openDialog:!1,selectedFolder:"default",selected:[]})},a.renderDialog=function(){return"preview"===a.state.dialogOption?l.a.createElement(we.a,{style:{maxWidth:500,maxHeight:500,marginTop:20}},"video/mp4"===a.state.dialogType?l.a.createElement(Pt.a,{width:"100%",height:"100%",playing:!0,url:a.state.dialogUrl}):l.a.createElement(Nt.a,{frameWidth:"450px",frameHeight:"450px",imgSize:"contain",imgSrc:a.state.dialogUrl})):"edit"===a.state.dialogOption?l.a.createElement("div",null,l.a.createElement(we.a,null,l.a.createElement(F.a,{margin:"dense",id:"name",label:"File Name",fullWidth:!0,value:a.state.selectedFileName,onChange:a._handleEditFileNameChange}),l.a.createElement(vt.a,{style:{marginTop:20},fullWidth:!0,variant:"outlined",noValidate:!0,autoComplete:"off"},l.a.createElement(Ct.a,{ref:function(e){a.InputLabelRef=e},htmlFor:"outlined-age-simple"},"Folder"),l.a.createElement(kt.a,{value:a.state.selectedFolder,onChange:a.handleSelectionChange,input:l.a.createElement(wt.a,{labelWidth:100,name:"folder",id:"outlined-age-simple"})},l.a.createElement(xt.a,{value:"default"},l.a.createElement("em",null,"Default")),a.props.folderCollection.map(function(e){return l.a.createElement(xt.a,{key:e.id,value:e.id},e.name)})))),l.a.createElement(Pe.a,null,l.a.createElement(D.a,{onClick:a.handleEditFile,color:"primary"},"Submit"),l.a.createElement(D.a,{onClick:a.handleClose,color:"default"},"Cancel"))):"delete"===a.state.dialogOption?l.a.createElement("div",null,l.a.createElement(we.a,null,l.a.createElement(xe.a,{id:"alert-dialog-description"},"Are you sure you want to permanently delete these file?")),l.a.createElement(Pe.a,null,l.a.createElement(D.a,{onClick:a.handleRemoveFile,color:"default"},"Yes"),l.a.createElement(D.a,{color:"primary",onClick:a.handleClose},"No"))):"deleteAll"===a.state.dialogOption?l.a.createElement("div",null,l.a.createElement(we.a,null,l.a.createElement(xe.a,{id:"alert-dialog-description"},"Are you sure you want to permanently delete these file?")),l.a.createElement(Pe.a,null,l.a.createElement(D.a,{onClick:a.handleRemoveAllFile,color:"default"},"Yes"),l.a.createElement(D.a,{color:"primary",onClick:a.handleClose},"No"))):"moveAll"===a.state.dialogOption?l.a.createElement("div",null,l.a.createElement(we.a,{style:{width:200}},l.a.createElement(vt.a,{style:{marginTop:20},fullWidth:!0,variant:"outlined",noValidate:!0,autoComplete:"off"},l.a.createElement(Ct.a,{ref:function(e){a.InputLabelRef=e},htmlFor:"outlined-age-simple"},"Folder"),l.a.createElement(kt.a,{value:a.state.selectedFolder,onChange:a.handleSelectionChange,input:l.a.createElement(wt.a,{labelWidth:100,name:"folder",id:"outlined-age-simple"})},l.a.createElement(xt.a,{value:"default"},l.a.createElement("em",null,"Default")),a.props.folderCollection.map(function(e){return l.a.createElement(xt.a,{key:e.id,value:e.id},e.name)})))),l.a.createElement(Pe.a,null,l.a.createElement(D.a,{onClick:a.handleMoveAllFile,color:"primary"},"Yes"),l.a.createElement(D.a,{onClick:a.handleClose,color:"primary",autoFocus:!0},"No"))):void 0},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.rows,i=t.data,r=this.state,o=r.order,c=r.orderBy,d=r.selected,s=r.rowsPerPage,u=r.page,m=s-Math.min(s,i.length-u*s);return l.a.createElement("div",{className:a.root},l.a.createElement(Ce.a,{onClose:this.handleClose,"aria-labelledby":"customized-dialog-title",open:this.state.openDialog},"preview"!==this.state.dialogOption?l.a.createElement(ke.a,{id:"customized-dialog-title",onClose:this.handleClose},this.state.dialogTitle):l.a.createElement("div",null),this.renderDialog()),l.a.createElement(Wt,{numSelected:d.length,onDeleteAllClick:this.onDeleteAllClick,onMoveAllClick:this.onMoveAllClick,movefile:this.props.movefile}),l.a.createElement("div",{className:a.tableWrapper},l.a.createElement(V.a,{className:a.table,"aria-labelledby":"tableTitle"},l.a.createElement(zt,{numSelected:d.length,order:o,orderBy:c,onSelectAllClick:this.handleSelectAllClick,onRequestSort:this.handleRequestSort,rowCount:i.length,rows:n}),l.a.createElement(G.a,null,function(e,t){var a=e.map(function(e,t){return[e,t]});return a.sort(function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]}),a.map(function(e){return e[0]})}(i,function(e,t){return"desc"===e?function(e,a){return Ut(e,a,t)}:function(e,a){return-Ut(e,a,t)}}(o,c)).slice(u*s,u*s+s).map(function(t){var i=e.isSelected(t.id);return l.a.createElement(te.a,{hover:!0,role:"checkbox","aria-checked":i,tabIndex:-1,key:t.id,selected:i},l.a.createElement(X.a,{onClick:function(a){return e.handleClick(a,t.id)},padding:"checkbox"},l.a.createElement(oe.a,{checked:i})),n.map(function(n){return n.thumbnail?l.a.createElement(X.a,{key:n.id,onClick:function(a){return e.handleClick(a,t.id)},align:"left",padding:"default"},"video/mp4"===t.type?l.a.createElement("div",{style:{height:50}},l.a.createElement(st.f,{style:{fontSize:50,color:"#b4b4b4"}})):l.a.createElement("img",{style:{height:50},src:t.imageUrl,alt:""})):n.action?e.props.preview?l.a.createElement(X.a,{key:n.id,align:"left",padding:"none"},l.a.createElement("div",{className:a.actionButtons},l.a.createElement(de.a,{color:"primary",onClick:function(){return e.onPreviewClick(t.type,t.name,t.imageUrl)}},l.a.createElement(ve.a,{fontSize:"small"})),l.a.createElement(de.a,{onClick:function(){return e.onEditClick(t.id,t.name)}},l.a.createElement(fe.a,{fontSize:"small"})),l.a.createElement(de.a,{onClick:function(){return e.onDeleteClick(t.id)}},l.a.createElement(pe.a,{fontSize:"small"})))):l.a.createElement(X.a,{key:n.id,align:"left",padding:"none"},l.a.createElement("div",{className:a.actionButtons},l.a.createElement(de.a,{onClick:function(){return e.onEditClick(t.id,t.name)}},l.a.createElement(fe.a,{fontSize:"small"})),l.a.createElement(de.a,{onClick:function(){return e.onDeleteClick(t.id)}},l.a.createElement(pe.a,{fontSize:"small"})))):"size"===n.id?l.a.createElement(X.a,{key:n.id,onClick:function(a){return e.handleClick(a,t.id)},align:"left",padding:"default"},e.bytesToSize(t[n.id])):"created"===n.id?l.a.createElement(X.a,{key:n.id,onClick:function(a){return e.handleClick(a,t.id)},align:"left",padding:"default"},new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(t[n.id])):l.a.createElement(X.a,{key:n.id,onClick:function(a){return e.handleClick(a,t.id)},align:"left",padding:"default"},t[n.id])}))}),m>0&&l.a.createElement(te.a,{style:{height:49*m}},l.a.createElement(X.a,{colSpan:6}))))),l.a.createElement(Q.a,{rowsPerPageOptions:[5,10,25],component:"div",count:i.length,rowsPerPage:s,page:u,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),t}(l.a.Component),_t=Object(O.withStyles)(function(e){return{root:{width:"100%"},table:{minWidth:1020},tableWrapper:{overflowX:"auto"},actionButtons:{display:"flex"}}})(Lt);function qt(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var Ht=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.onSelectAllClick,n=t.order,i=t.orderBy,r=t.numSelected,o=t.rowCount,c=t.rows;return l.a.createElement($.a,null,l.a.createElement(te.a,null,l.a.createElement(X.a,{padding:"checkbox"},l.a.createElement(oe.a,{indeterminate:r>0&&r<o,checked:r===o,onChange:a})),c.map(function(t){return l.a.createElement(X.a,{key:t.id,align:t.numeric?"right":"left",padding:t.disablePadding?"none":"default",sortDirection:i===t.id&&n},l.a.createElement(ue.a,{title:"Sort",disableTouchListener:!t.sortable,disableFocusListener:!t.sortable,disableHoverListener:!t.sortable,placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},l.a.createElement(ne.a,{active:!(i!==t.id||!t.sortable),direction:n,onClick:e.createSortHandler(t.id)},t.label)))},this)))}}]),t}(l.a.Component),Vt=function(e){var t=e.numSelected,a=e.classes,n=e.onMoveAllClick,i=e.onDeleteAllClick,r=e.movefile,o=e.onAddFolderClick;return l.a.createElement(ie.a,{className:q()(a.root,Object(L.a)({},a.highlight,t>0))},l.a.createElement("div",{className:a.title},t>0?l.a.createElement(j.a,{color:"inherit",variant:"subtitle1"},t," selected"):l.a.createElement(j.a,{variant:"h6",id:"tableTitle"})),l.a.createElement("div",{className:a.spacer}),l.a.createElement("div",{className:a.actions},t>0?r?l.a.createElement("div",{style:{display:"flex",alignItems:"center"}},l.a.createElement(ue.a,{title:"Move"},l.a.createElement(de.a,{"aria-label":"Move",onClick:n},l.a.createElement(st.k,null))),l.a.createElement(ue.a,{title:"Delete"},l.a.createElement(de.a,{"aria-label":"Delete",onClick:i},l.a.createElement(pe.a,null)))):l.a.createElement(ue.a,{title:"Delete"},l.a.createElement(de.a,{"aria-label":"Delete",onClick:i},l.a.createElement(pe.a,null))):l.a.createElement(ue.a,{title:"Add Folder"},l.a.createElement(de.a,{"aria-label":"Add Folder",onClick:o},l.a.createElement(st.a,null)))))};Vt=Object(O.withStyles)(function(e){return{root:{paddingRight:e.spacing.unit},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(me.lighten)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"}}})(Vt);var Yt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).state={order:"desc",orderBy:a.props.orderBy,selected:[],selectedId:"",page:0,rowsPerPage:5,openDialog:!1,dialogTitle:"No Title",folderId:"",folderName:"",dialogOption:"",selectedFileName:"",mediaData:[],folderCollection:[],addFolderName:""},a.handleRequestSort=function(e,t){var n=t,l="desc";a.state.orderBy===t&&"desc"===a.state.order&&(l="asc"),a.setState({order:l,orderBy:n})},a.handleSelectAllClick=function(e){e.target.checked?a.setState({selected:a.props.data.map(function(e){return e.id})}):a.setState({selected:[]})},a.handleClick=function(e,t){var n=a.state.selected,l=n.indexOf(t),i=[];-1===l?i=i.concat(n,t):0===l?i=i.concat(n.slice(1)):l===n.length-1?i=i.concat(n.slice(0,-1)):l>0&&(i=i.concat(n.slice(0,l),n.slice(l+1))),a.setState({selected:i})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a.bytesToSize=function(e){if(0===e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]},a.onFolderClick=function(e,t){y.a.database().ref("media").on("value",function(t){var n=[];t.forEach(function(t){var a=t.val();a.key=t.key,a.folder===e&&n.push({id:a.key,name:a.name,imageUrl:a.imageUrl,created:a.created,type:a.type,size:a.size,folder:a.folder})}),a.setState({mediaData:n})}),y.a.database().ref("media_folder").on("value",function(e){var t=[];e.forEach(function(e){var a=e.val();a.key=e.key,t.push({id:a.key,name:a.name,created:a.created,total:a.total})}),a.setState({folderCollection:t})}),a.setState({openDialog:!0,dialogTitle:t,folderId:e,folderName:t,dialogOption:"folderSelect"})},a.onAddFolderClick=function(){a.setState({openDialog:!0,dialogTitle:"Add Folder",dialogOption:"addFolder",addFolderName:""})},a.onEditClick=function(e,t){a.setState({openDialog:!0,dialogTitle:"Edit folder",selectedId:e,dialogOption:"edit",selectedFileName:t,selectedFolder:"default"})},a.onDeleteClick=function(e){a.setState({openDialog:!0,dialogTitle:"Remove folder",selectedId:e,dialogOption:"delete"})},a.onDeleteAllClick=function(){a.setState({openDialog:!0,dialogOption:"deleteAll",dialogTitle:"Remove folder"})},a.onMoveAllClick=function(){a.setState({openDialog:!0,dialogOption:"moveAll",dialogTitle:"Move file",selectedFolder:"default"})},a.handleClose=function(){a.setState({openDialog:!1})},a._handleEditFileNameChange=function(e){a.setState({selectedFileName:e.target.value})},a.handleSelectionChange=function(e){a.setState({selectedFolder:e.target.value})},a.handleEditFile=function(){y.a.database().ref().child("/media_folder/"+a.state.selectedId).update({name:a.state.selectedFileName}),a.setState({openDialog:!1,selectedFolder:"default",selectedFileName:"",selected:[]})},a.handleRemoveFile=function(){y.a.database().ref("media").once("value",function(e){e.forEach(function(e){var t=e.val();t.folder===a.state.selectedId&&y.a.database().ref("media").child(e.key).remove().then(function(){y.a.storage().ref().child(t.fullPath).delete().then(function(){})})})}),y.a.database().ref(a.props.dataName).child(a.state.selectedId).remove(),a.setState({openDialog:!1,selectedId:"",selected:[]})},a.handleRemoveAllFile=function(){a.state.selected.forEach(function(e){y.a.database().ref("media").once("value",function(t){t.forEach(function(t){var a=t.val();a.folder===e&&y.a.database().ref("media").child(t.key).remove().then(function(){y.a.storage().ref().child(a.fullPath).delete().then(function(){})})})}),y.a.database().ref(a.props.dataName).child(e).remove()}),a.setState({openDialog:!1,selected:[]})},a.handleMoveAllFile=function(){"default"!==a.state.selectedFolder&&a.state.selected.forEach(function(e){y.a.database().ref().child("/media/"+e).update({folder:a.state.selectedFolder}),y.a.database().ref().child("/media_folder/"+a.state.selectedFolder).child("total").transaction(function(e){return e+1})}),a.setState({openDialog:!1,selectedFolder:"default",selected:[]})},a._handleFolderNameChange=function(e){a.setState({addFolderName:e.target.value})},a.handleAddFolder=function(){var e=Object(v.a)(E.a.mark(function e(t){var n,l,i;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n={name:a.state.addFolderName,created:y.a.database.ServerValue.TIMESTAMP,total:0},l=y.a.database().ref().child("media_folder").push().key,(i={})["/media_folder/"+l]=n,y.a.database().ref().update(i),a.setState({openDialog:!1,addFolderName:"",selected:[]});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.renderDialog=function(){return"folderSelect"===a.state.dialogOption?l.a.createElement(we.a,null,l.a.createElement(_t,{rows:[{id:"name",numeric:!1,disablePadding:!1,label:"Name",sortable:!0},{id:"imageUrl",numeric:!1,disablePadding:!1,label:"File Thumbnail",sortable:!0,thumbnail:!0},{id:"created",numeric:!1,disablePadding:!1,label:"Created by",sortable:!0},{id:"type",numeric:!1,disablePadding:!1,label:"File Type",sortable:!0},{id:"size",numeric:!1,disablePadding:!1,label:"File Size",sortable:!0},{id:"action",numeric:!1,disablePadding:!1,sortable:!1,action:!0}],data:a.state.mediaData,orderBy:"created",folderCollection:a.state.folderCollection,preview:!0,movefile:!0,dataName:"media",selectedFolder:a.state.folderId})):"edit"===a.state.dialogOption?l.a.createElement("div",null,l.a.createElement(we.a,null,l.a.createElement(F.a,{margin:"dense",id:"name",label:"File Name",fullWidth:!0,value:a.state.selectedFileName,onChange:a._handleEditFileNameChange})),l.a.createElement(Pe.a,null,l.a.createElement(D.a,{onClick:a.handleEditFile,color:"primary"},"Submit"),l.a.createElement(D.a,{onClick:a.handleClose,color:"default"},"Cancel"))):"delete"===a.state.dialogOption?l.a.createElement("div",null,l.a.createElement(we.a,null,l.a.createElement(xe.a,{id:"alert-dialog-description"},"Are you sure you want to permanently delete these folder?")),l.a.createElement(Pe.a,null,l.a.createElement(D.a,{onClick:a.handleRemoveFile,color:"default"},"Yes"),l.a.createElement(D.a,{color:"primary",onClick:a.handleClose},"No"))):"deleteAll"===a.state.dialogOption?l.a.createElement("div",null,l.a.createElement(we.a,null,l.a.createElement(xe.a,{id:"alert-dialog-description"},"Are you sure you want to permanently delete these folder?")),l.a.createElement(Pe.a,null,l.a.createElement(D.a,{onClick:a.handleRemoveAllFile,color:"default"},"Yes"),l.a.createElement(D.a,{color:"primary",onClick:a.handleClose},"No"))):"moveAll"===a.state.dialogOption?l.a.createElement("div",null,l.a.createElement(we.a,{style:{width:200}},l.a.createElement(vt.a,{style:{marginTop:20},fullWidth:!0,variant:"outlined",noValidate:!0,autoComplete:"off"},l.a.createElement(Ct.a,{ref:function(e){a.InputLabelRef=e},htmlFor:"outlined-age-simple"},"Folder"),l.a.createElement(kt.a,{value:a.state.selectedFolder,onChange:a.handleSelectionChange,input:l.a.createElement(wt.a,{labelWidth:100,name:"folder",id:"outlined-age-simple"})},l.a.createElement(xt.a,{value:"default"},l.a.createElement("em",null,"Default")),a.props.folderCollection.map(function(e){return l.a.createElement(xt.a,{key:e.id,value:e.id},e.name)})))),l.a.createElement(Pe.a,null,l.a.createElement(D.a,{onClick:a.handleMoveAllFile,color:"primary"},"Yes"),l.a.createElement(D.a,{onClick:a.handleClose,color:"primary",autoFocus:!0},"No"))):"addFolder"===a.state.dialogOption?l.a.createElement("div",null,l.a.createElement(we.a,null,l.a.createElement(vt.a,{fullWidth:!0,variant:"outlined",noValidate:!0,autoComplete:"off",onSubmit:a.handleAddFolder},l.a.createElement(F.a,{autoFocus:!0,margin:"dense",id:"name",label:"Folder Name",fullWidth:!0,value:a.state.addFolderName,onChange:a._handleFolderNameChange}))),l.a.createElement(Pe.a,null,l.a.createElement(D.a,{onClick:a.handleAddFolder,color:"primary"},"Add"),l.a.createElement(D.a,{onClick:a.handleClose,color:"default"},"Cancel"))):void 0},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.rows,i=t.data,r=this.state,o=r.order,c=r.orderBy,d=r.selected,s=r.rowsPerPage,u=r.page,m=s-Math.min(s,i.length-u*s);return l.a.createElement("div",{className:a.root},l.a.createElement(Ce.a,{onClose:this.handleClose,"aria-labelledby":"customized-dialog-title",open:this.state.openDialog,maxWidth:"xl"},l.a.createElement(ke.a,{id:"customized-dialog-title",onClose:this.handleClose},this.state.dialogTitle),this.renderDialog()),l.a.createElement(Vt,{numSelected:d.length,onDeleteAllClick:this.onDeleteAllClick,onMoveAllClick:this.onMoveAllClick,movefile:this.props.movefile,onAddFolderClick:this.onAddFolderClick}),l.a.createElement("div",{className:a.tableWrapper},l.a.createElement(V.a,{className:a.table,"aria-labelledby":"tableTitle"},l.a.createElement(Ht,{numSelected:d.length,order:o,orderBy:c,onSelectAllClick:this.handleSelectAllClick,onRequestSort:this.handleRequestSort,rowCount:i.length,rows:n}),l.a.createElement(G.a,null,function(e,t){var a=e.map(function(e,t){return[e,t]});return a.sort(function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]}),a.map(function(e){return e[0]})}(i,function(e,t){return"desc"===e?function(e,a){return qt(e,a,t)}:function(e,a){return-qt(e,a,t)}}(o,c)).slice(u*s,u*s+s).map(function(t){var i=e.isSelected(t.id);return l.a.createElement(te.a,{hover:!0,role:"checkbox","aria-checked":i,tabIndex:-1,key:t.id,selected:i},l.a.createElement(X.a,{onClick:function(a){return e.handleClick(a,t.id)},padding:"checkbox"},l.a.createElement(oe.a,{checked:i})),n.map(function(n){return n.thumbnail?l.a.createElement(X.a,{key:n.id,onClick:function(a){return e.handleClick(a,t.id)},align:"left",padding:"default"},"video/mp4"===t.type?l.a.createElement("div",{style:{height:50}},l.a.createElement(st.f,{style:{fontSize:50,color:"#b4b4b4"}})):l.a.createElement("img",{style:{height:50},src:t.imageUrl,alt:""})):n.action?l.a.createElement(X.a,{key:n.id,align:"left",padding:"none"},l.a.createElement("div",{className:a.actionButtons},l.a.createElement(de.a,{color:t.total>0?"primary":"default",disabled:!(t.total>0),onClick:function(){return e.onFolderClick(t.id,t.name)}},l.a.createElement(Mt.a,{fontSize:"small"})),l.a.createElement(de.a,{onClick:function(){return e.onEditClick(t.id,t.name)}},l.a.createElement(fe.a,{fontSize:"small"})),l.a.createElement(de.a,{onClick:function(){return e.onDeleteClick(t.id)}},l.a.createElement(pe.a,{fontSize:"small"})))):"size"===n.id?l.a.createElement(X.a,{key:n.id,onClick:function(a){return e.handleClick(a,t.id)},align:"left",padding:"default"},e.bytesToSize(t[n.id])):"created"===n.id?l.a.createElement(X.a,{key:n.id,onClick:function(a){return e.handleClick(a,t.id)},align:"left",padding:"default"},new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(t[n.id])):l.a.createElement(X.a,{key:n.id,onClick:function(a){return e.handleClick(a,t.id)},align:"left",padding:"default"},t[n.id])}))}),m>0&&l.a.createElement(te.a,{style:{height:49*m}},l.a.createElement(X.a,{colSpan:6}))))),l.a.createElement(Q.a,{rowsPerPageOptions:[5,10,25],component:"div",count:i.length,rowsPerPage:s,page:u,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),t}(l.a.Component),Gt=Object(O.withStyles)(function(e){return{root:{width:"100%"},table:{minWidth:1020},tableWrapper:{overflowX:"auto"},actionButtons:{display:"flex"}}})(Yt),Kt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).state={mediaData:[],folderCollection:[]},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this;y.a.database().ref("media").on("value",function(t){var a=[];t.forEach(function(e){var t=e.val();t.key=e.key,"default"===t.folder&&a.push({id:t.key,name:t.name,imageUrl:t.imageUrl,created:t.created,type:t.type,size:t.size,folder:t.folder})}),e.setState({mediaData:a})}),y.a.database().ref("media_folder").on("value",function(t){var a=[];t.forEach(function(e){var t=e.val();t.key=e.key,a.push({id:t.key,name:t.name,created:t.created,total:t.total})}),e.setState({folderCollection:a})})}},{key:"renderMediaContent",value:function(){return l.a.createElement(Bt,{rows:[{id:"name",numeric:!1,disablePadding:!1,label:"Name",sortable:!0},{id:"imageUrl",numeric:!1,disablePadding:!1,label:"File Thumbnail",sortable:!0,thumbnail:!0},{id:"created",numeric:!1,disablePadding:!1,label:"Created by",sortable:!0},{id:"type",numeric:!1,disablePadding:!1,label:"File Type",sortable:!0},{id:"size",numeric:!1,disablePadding:!1,label:"File Size",sortable:!0},{id:"action",numeric:!1,disablePadding:!1,sortable:!1,action:!0}],data:this.state.mediaData,orderBy:"created",folderCollection:this.state.folderCollection,preview:!0,movefile:!0,dataName:"media"})}},{key:"renderFoldersContent",value:function(){return l.a.createElement(Gt,{rows:[{id:"name",numeric:!1,disablePadding:!1,label:"Folder Name",sortable:!0},{id:"total",numeric:!1,disablePadding:!1,label:"Total Files",sortable:!0},{id:"created",numeric:!1,disablePadding:!1,label:"Created by",sortable:!0},{id:"action",numeric:!1,disablePadding:!1,sortable:!1,action:!0}],data:this.state.folderCollection,orderBy:"created",folderCollection:this.state.folderCollection,movefile:!1,dataName:"media_folder"})}},{key:"render",value:function(){return l.a.createElement("div",{style:{padding:20}},l.a.createElement(ft,null),l.a.createElement(lt,{panel:[{name:"Media",content:this.renderMediaContent()},{name:"Folders",content:this.renderFoldersContent()}]}))}}]),t}(n.Component);function Xt(e){return l.a.createElement(Ie.a,Object.assign({direction:"up"},e))}function Zt(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var $t=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.onSelectAllClick,n=t.order,i=t.orderBy,r=t.numSelected,o=t.rowCount,c=t.rows;return l.a.createElement($.a,null,l.a.createElement(te.a,null,l.a.createElement(X.a,{padding:"checkbox"},l.a.createElement(oe.a,{indeterminate:r>0&&r<o,checked:r===o,onChange:a})),c.map(function(t){return l.a.createElement(X.a,{key:t.id,align:t.numeric?"right":"left",padding:t.disablePadding?"none":"default",sortDirection:i===t.id&&n},l.a.createElement(ue.a,{title:"Sort",disableTouchListener:!t.sortable,disableFocusListener:!t.sortable,disableHoverListener:!t.sortable,placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},l.a.createElement(ne.a,{active:!(i!==t.id||!t.sortable),direction:n,onClick:e.createSortHandler(t.id)},t.label)))},this)))}}]),t}(l.a.Component),Jt=function(e){var t=e.numSelected,a=e.classes,n=e.onDeleteAllClick,i=e.movefile;e.onAddCampaignClick;return l.a.createElement(ie.a,{className:q()(a.root,Object(L.a)({},a.highlight,t>0))},l.a.createElement("div",{className:a.title},t>0?l.a.createElement(j.a,{color:"inherit",variant:"subtitle1"},t," selected"):l.a.createElement(j.a,{variant:"h6",id:"tableTitle"})),l.a.createElement("div",{className:a.spacer}),l.a.createElement("div",{className:a.actions},t>0?i?l.a.createElement("div",{style:{display:"flex",alignItems:"center"}},l.a.createElement(ue.a,{title:"Delete"},l.a.createElement(de.a,{"aria-label":"Delete",onClick:n},l.a.createElement(pe.a,null)))):l.a.createElement(ue.a,{title:"Delete"},l.a.createElement(de.a,{"aria-label":"Delete",onClick:n},l.a.createElement(pe.a,null))):l.a.createElement("div",null)))};Jt=Object(O.withStyles)(function(e){return{root:{paddingRight:e.spacing.unit},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(me.lighten)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"}}})(Jt);function Qt(e){var t=e.children,a=e.dir;return l.a.createElement("div",{dir:a},t)}var ea=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).state={order:"desc",orderBy:a.props.orderBy,selected:[],selectedId:"",page:0,rowsPerPage:5,openDialog:!1,dialogTitle:"No Title",folderId:"",folderName:"",dialogOption:"",selectedFileName:"",dialogFullscreen:!1,value:0},a.handleRequestSort=function(e,t){var n=t,l="desc";a.state.orderBy===t&&"desc"===a.state.order&&(l="asc"),a.setState({order:l,orderBy:n})},a.handleSelectAllClick=function(e){e.target.checked?a.setState({selected:a.props.data.map(function(e){return e.id})}):a.setState({selected:[]})},a.handleClick=function(e,t){var n=a.state.selected,l=n.indexOf(t),i=[];-1===l?i=i.concat(n,t):0===l?i=i.concat(n.slice(1)):l===n.length-1?i=i.concat(n.slice(0,-1)):l>0&&(i=i.concat(n.slice(0,l),n.slice(l+1))),a.setState({selected:i})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a.bytesToSize=function(e){if(0===e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]},a.onAddCampaignClick=function(){},a.onEditClick=function(e){},a.onDeleteClick=function(e){a.setState({openDialog:!0,dialogTitle:"Remove Campaign",selectedId:e,dialogOption:"delete",dialogFullscreen:!1})},a.onPreviewClick=function(e){},a.onDeleteAllClick=function(){a.setState({openDialog:!0,dialogOption:"deleteAll",dialogTitle:"Remove Campaign",dialogFullscreen:!1})},a.handleClose=function(){a.setState({openDialog:!1})},a._handleEditFileNameChange=function(e){a.setState({selectedFileName:e.target.value})},a.handleSelectionChange=function(e){a.setState({selectedFolder:e.target.value})},a.handleEditFile=function(){y.a.database().ref().child("/media_folder/"+a.state.selectedId).update({name:a.state.selectedFileName}),a.setState({openDialog:!1,selectedFolder:"default",selectedFileName:"",selected:[]})},a.handleRemoveFile=function(){y.a.database().ref(a.props.dataName).child(a.state.selectedId).remove(),a.setState({openDialog:!1,selectedId:"",selected:[]})},a.handleRemoveAllFile=function(){a.state.selected.forEach(function(e){y.a.database().ref(a.props.dataName).child(e).remove()}),a.setState({openDialog:!1,selected:[]})},a.renderDialog=function(){return"delete"===a.state.dialogOption?l.a.createElement("div",null,l.a.createElement(we.a,null,l.a.createElement(xe.a,{id:"alert-dialog-description"},"Are you sure you want to permanently delete these campaign?")),l.a.createElement(Pe.a,null,l.a.createElement(D.a,{onClick:a.handleRemoveFile,color:"default"},"Yes"),l.a.createElement(D.a,{color:"primary",onClick:a.handleClose},"No"))):"deleteAll"===a.state.dialogOption?l.a.createElement("div",null,l.a.createElement(we.a,null,l.a.createElement(xe.a,{id:"alert-dialog-description"},"Are you sure you want to permanently delete these campaign?")),l.a.createElement(Pe.a,null,l.a.createElement(D.a,{onClick:a.handleRemoveAllFile,color:"default"},"Yes"),l.a.createElement(D.a,{color:"primary",onClick:a.handleClose},"No"))):void 0},a.handleTabsChange=function(e,t){a.setState({value:t})},a.handleTabsChangeIndex=function(e){a.setState({value:e})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.rows,i=t.data,r=t.theme,o=this.state,c=o.order,d=o.orderBy,s=o.selected,u=o.rowsPerPage,m=o.page,h=u-Math.min(u,i.length-m*u);return l.a.createElement("div",{className:a.root},l.a.createElement(Te.a,{className:a.AppBar,position:"static",color:"default"},l.a.createElement(Ue.a,{value:this.state.value,onChange:this.handleTabsChange,indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},l.a.createElement(We.a,{disableRipple:!0,label:"Template List"}),l.a.createElement(We.a,{disableRipple:!0,label:"Create Template"}))),l.a.createElement(Ce.a,{fullScreen:this.state.dialogFullscreen,onClose:this.handleClose,"aria-labelledby":"customized-dialog-title",open:this.state.openDialog,maxWidth:"xl",TransitionComponent:Xt},this.state.dialogFullscreen?l.a.createElement(Te.a,{className:a.appBar},l.a.createElement(ie.a,null,l.a.createElement(de.a,{color:"inherit",onClick:this.handleClose,"aria-label":"Close"},l.a.createElement(Ne.a,null)),l.a.createElement(j.a,{variant:"h6",color:"inherit",className:a.flex},this.state.dialogTitle),l.a.createElement(D.a,{color:"inherit",onClick:this.handleClose},"save"))):l.a.createElement(ke.a,{id:"customized-dialog-title",onClose:this.handleClose},this.state.dialogTitle),this.renderDialog()),l.a.createElement(Re.a,{axis:"rtl"===r.direction?"x-reverse":"x",index:this.state.value},l.a.createElement(Qt,{dir:r.direction},l.a.createElement(Jt,{numSelected:s.length,onDeleteAllClick:this.onDeleteAllClick,movefile:this.props.movefile,onAddCampaignClick:this.onAddCampaignClick}),l.a.createElement("div",{className:a.tableWrapper},l.a.createElement(V.a,{className:a.table,"aria-labelledby":"tableTitle"},l.a.createElement($t,{numSelected:s.length,order:c,orderBy:d,onSelectAllClick:this.handleSelectAllClick,onRequestSort:this.handleRequestSort,rowCount:i.length,rows:n}),l.a.createElement(G.a,null,function(e,t){var a=e.map(function(e,t){return[e,t]});return a.sort(function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]}),a.map(function(e){return e[0]})}(i,function(e,t){return"desc"===e?function(e,a){return Zt(e,a,t)}:function(e,a){return-Zt(e,a,t)}}(c,d)).slice(m*u,m*u+u).map(function(t){var i=e.isSelected(t.id);return l.a.createElement(te.a,{hover:!0,role:"checkbox","aria-checked":i,tabIndex:-1,key:t.id,selected:i},l.a.createElement(X.a,{onClick:function(a){return e.handleClick(a,t.id)},padding:"checkbox"},l.a.createElement(oe.a,{checked:i})),n.map(function(n){return n.action?l.a.createElement(X.a,{key:n.id,align:"left",padding:"none"},l.a.createElement("div",{className:a.actionButtons},l.a.createElement(de.a,{color:t.total>0?"primary":"default",disabled:!(t.total>0),onClick:function(){return e.onPreviewClick(t.id)}},l.a.createElement(ve.a,{fontSize:"small"})),l.a.createElement(de.a,{onClick:function(){return e.onEditClick(t.id)}},l.a.createElement(fe.a,{fontSize:"small"})),l.a.createElement(de.a,{onClick:function(){return e.onDeleteClick(t.id)}},l.a.createElement(pe.a,{fontSize:"small"})))):"created"===n.id?l.a.createElement(X.a,{key:n.id,onClick:function(a){return e.handleClick(a,t.id)},align:"left",padding:"default"},new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(t[n.id])):"template"===n.id?l.a.createElement(X.a,{key:n.id,onClick:function(a){return e.handleClick(a,t.id)},align:"left",padding:"default"},t.template_name):l.a.createElement(X.a,{key:n.id,onClick:function(a){return e.handleClick(a,t.id)},align:"left",padding:"default"},t[n.id])}))}),h>0&&l.a.createElement(te.a,{style:{height:49*h}},l.a.createElement(X.a,{colSpan:6}))))),l.a.createElement(Q.a,{rowsPerPageOptions:[5,10,25],component:"div",count:i.length,rowsPerPage:u,page:m,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage})),l.a.createElement(Qt,{dir:r.direction})))}}]),t}(l.a.Component),ta=Object(O.withStyles)(function(e){return{root:{width:"100%"},table:{minWidth:1020},tableWrapper:{overflowX:"auto"},actionButtons:{display:"flex"},appBar:{position:"relative"},flex:{flex:1},AppBar:{boxShadow:"none",borderBottom:"1px solid #e8e8e8"}}},{withTheme:!0})(ea),aa=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).state={templateData:[]},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this;y.a.database().ref("template").on("value",function(t){var a=[];t.forEach(function(e){var t=e.val();t.key=e.key,a.push({id:t.key,name:t.name,created:t.created,size:t.size,container:t.container})}),e.setState({templateData:a})})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(ta,{rows:[{id:"name",numeric:!1,disablePadding:!1,label:"Template Name",sortable:!0},{id:"created",numeric:!1,disablePadding:!1,label:"Created by",sortable:!0},{id:"action",numeric:!1,disablePadding:!1,sortable:!1,action:!0}],data:this.state.templateData,orderBy:"created",movefile:!1,dataName:"template"}))}}]),t}(n.Component),na=a(30),la=a.n(na),ia=a(148),ra=a(218),oa=a.n(ra),ca=a(95),da=a.n(ca),sa=a(87),ua=a.n(sa),ma=a(98),ha=a.n(ma),pa=a(110),ga=a.n(pa),fa=a(221),Ea=a.n(fa),va=a(106),ba=a.n(va),Ca=a(222),ya=a.n(Ca),ka=a(122),Sa=a.n(ka),wa=a(219),Oa=a(129),xa=a.n(Oa),Fa=window.innerHeight-115,Pa=Object(ia.sortableElement)(function(e){var t=e.value,a=e.index,n=e.handleToggle,i=e.checked,r=e.mediaCollection,o=e.allContainer,c=e.currentContainer;return r.map(function(e){if(e.id===t.content)return"video/mp4"===e.type?l.a.createElement(ua.a,{key:a,selected:o[c]===t.content,divider:!0,dense:!0,button:!0,onClick:n(e.id)},l.a.createElement(oe.a,{checked:-1!==i.indexOf(e.id),tabIndex:-1}),l.a.createElement(st.f,{style:{fontSize:30,marginLeft:5,marginRight:5,color:"#b4b4b4"}}),l.a.createElement(ha.a,{primary:e.name})):l.a.createElement(ua.a,{key:a,selected:o[c]===t.content,divider:!0,dense:!0,button:!0,onClick:n(e.id)},l.a.createElement(oe.a,{checked:-1!==i.indexOf(e.id),tabIndex:-1}),l.a.createElement(Ea.a,{src:e.imageUrl}),l.a.createElement(ha.a,{primary:e.name}))})}),Da=Object(ia.sortableContainer)(function(e){var t=e.children;return l.a.createElement(da.a,null,t)}),Na=[],ja=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).state={selectedTemplate:"default",templateCollection:[],contents:[[]],allContainer:[""],openDialog:!1,dialogOption:"",dialogTitle:"",mediaData:[],folderCollection:[],currentContainer:0,checked:[],campaignName:"",mediaCollection:[],contentDuration:0,transitionSelected:"fade",dialogTitleVisible:!0,currentSlideIndex:[0]},a.handleTemplateChange=function(e){var t=[],n=[],l=[];"default"!==e.target.value?a.state.templateCollection.map(function(a){e.target.value===a.id&&a.container.map(function(e){t.push([]),n.push(""),l.push(0)})}):(t.push([]),n.push(""),l.push(0)),a.setState({selectedTemplate:e.target.value,contents:t,allContainer:n,currentContainer:0,contentDuration:0,transitionSelected:"fade",currentSlideIndex:l})},a.handleToggle=function(e){return function(){var t=a.state.checked,n=t.indexOf(e),l=Object(it.a)(t);-1===n?l.push(e):l.splice(n,1),a.setState({checked:l})}},a.onSortEnd=function(e){var t,n=e.oldIndex,l=e.newIndex,i=[[]];i=a.state.contents,t=oa()(a.state.contents[a.state.currentContainer],n,l),i.map(function(e,n){n===a.state.currentContainer&&(i[n]=t)}),a.setState({contents:i})},a.onSortStart=function(e){e.node;var t=e.index,n=(e.collection,e.isKeySorting,a.state.allContainer.map(function(e,n){return n==a.state.currentContainer?a.state.contents[a.state.currentContainer][t].content:a.state.allContainer[n]}));"video/mp4"===a.state.contents[a.state.currentContainer][t].type?a.setState({allContainer:n,contentDuration:null,transitionSelected:a.state.contents[a.state.currentContainer][t].transition}):a.setState({allContainer:n,contentDuration:a.state.contents[a.state.currentContainer][t].duration,transitionSelected:a.state.contents[a.state.currentContainer][t].transition})},a.handleClose=function(){var e=[];if("default"!==a.state.selectedTemplate){var t=a.state.templateCollection.map(function(e){return e.id}).indexOf(a.state.selectedTemplate);a.state.templateCollection[t].container.map(function(t,a){clearTimeout(Na[a]),Na[a]=null,e.push(0)})}else clearTimeout(Na[0]),Na[0]=null,e.push(0);a.setState({openDialog:!1,currentSlideIndex:e})},a.renderSortableItem=function(){return a.state.contents[a.state.currentContainer]?a.state.contents[a.state.currentContainer].map(function(e,t){return l.a.createElement(Pa,{key:"item-".concat(t),index:t,value:e,handleToggle:a.handleToggle,checked:a.state.checked,mediaCollection:a.state.mediaCollection,currentContainer:a.state.currentContainer,allContainer:a.state.allContainer})}):l.a.createElement("div",null)},a.renderSortable=function(){return l.a.createElement(Da,{lockAxis:"y",onSortEnd:a.onSortEnd,onSortStart:a.onSortStart},l.a.createElement(ga.a,null),a.renderSortableItem())},a.renderTemplate=function(){if("default"!==a.state.selectedTemplate){var e=[];a.state.templateCollection.map(function(t,n){t.id===a.state.selectedTemplate&&t.container.map(function(t,a){e.push({id:t.id,width:t.width,height:t.height})})});var t=[];return a.state.allContainer.map(function(e,n){""!==a.state.allContainer[n]?a.state.mediaCollection.map(function(e,l){e.id===a.state.allContainer[n]&&t.push({id:e.id,name:e.name,imageUrl:e.imageUrl,type:e.type})}):t.push({id:"",name:"",imageUrl:""})}),e.map(function(e,n){return"video/mp4"===t[n].type?l.a.createElement(la.a,{key:e.id,style:{height:e.height/4,width:e.width/4},onClick:function(){if(a.state.currentContainer!==n){var e=a.state.allContainer[n],t=a.state.contents[n].map(function(e){return e.content}).indexOf(e);-1!==t?a.setState({currentContainer:n,checked:[],transitionSelected:a.state.contents[n][t].transition,contentDuration:a.state.contents[n][t].duration}):a.setState({currentContainer:n,checked:[]})}},item:!0},l.a.createElement(A.a,{className:a.state.currentContainer===n?a.props.classes.container:null,square:!0,style:{height:"100%",width:"100%",display:"flex",justifyContent:"center"}},l.a.createElement("video",{style:{width:"100%"},autoPlay:!0,src:t[n]?t[n].imageUrl:"",type:"video/mp4"}))):l.a.createElement(la.a,{key:e.id,style:{height:e.height/4,width:e.width/4},onClick:function(){if(a.state.currentContainer!==n){var e=a.state.allContainer[n],t=a.state.contents[n].map(function(e){return e.content}).indexOf(e);-1!==t?a.setState({currentContainer:n,checked:[],transitionSelected:a.state.contents[n][t].transition,contentDuration:a.state.contents[n][t].duration}):a.setState({currentContainer:n,checked:[]})}},item:!0},l.a.createElement(A.a,{className:a.state.currentContainer===n?a.props.classes.container:null,square:!0,style:{height:"100%",width:"100%"}},l.a.createElement(Nt.a,{imgSize:"contain",imgSrc:t[n]?t[n].imageUrl:"",style:{}})))})}var n=[];return a.state.allContainer.map(function(e,t){a.state.allContainer[t]&&""!==a.state.allContainer[t]?a.state.mediaCollection.map(function(e,l){e.id===a.state.allContainer[t]&&n.push({id:e.id,name:e.name,imageUrl:e.imageUrl,type:e.type})}):n.push({id:"",name:"",imageUrl:""})}),n[0]&&"video/mp4"===n[0].type?l.a.createElement(la.a,{item:!0},l.a.createElement(A.a,{square:!0,style:{height:480,width:270,display:"flex",justifyContent:"center"}},l.a.createElement("video",{style:{width:"100%"},autoPlay:!0,src:n[0]?n[0].imageUrl:"",type:"video/mp4"}))):l.a.createElement(la.a,{item:!0},l.a.createElement(A.a,{square:!0,style:{height:480,width:270}},l.a.createElement(Nt.a,{imgSize:"contain",frameWidth:"270px",frameHeight:"480px",imgSrc:n[0]?n[0].imageUrl:"",style:{}})))},a.renderDialog=function(){if("addMedia"===a.state.dialogOption)return l.a.createElement("div",null,l.a.createElement(we.a,null,l.a.createElement(Bt,{rows:[{id:"name",numeric:!1,disablePadding:!1,label:"Name",sortable:!0},{id:"imageUrl",numeric:!1,disablePadding:!1,label:"File Thumbnail",sortable:!0,thumbnail:!0},{id:"created",numeric:!1,disablePadding:!1,label:"Created by",sortable:!0},{id:"type",numeric:!1,disablePadding:!1,label:"File Type",sortable:!0},{id:"size",numeric:!1,disablePadding:!1,label:"File Size",sortable:!0},{id:"action",numeric:!1,disablePadding:!1,sortable:!1,action:!0}],orderBy:"created",folderCollection:a.state.folderCollection,preview:!0,movefile:!0,select:!0,dataName:"media",folderSelection:!0,onAddMediaClick:a.onAddMediaClick})));if("preview"===a.state.dialogOption){if("default"!==a.state.selectedTemplate){var e=[];return a.state.templateCollection.map(function(t,n){t.id===a.state.selectedTemplate&&t.container.map(function(t,a){e.push({id:t.id,width:t.width,height:t.height})})}),l.a.createElement(we.a,{style:{backgroundColor:"#efefef",paddingTop:25}},e.map(function(e,t){return l.a.createElement(la.a,{key:e.id,style:{height:e.height/4,width:e.width/4},item:!0},a.renderListAllCarouselItem(t,e.width/4,e.height/4))}))}return l.a.createElement(we.a,{style:{backgroundColor:"#efefef",paddingTop:25}},l.a.createElement(la.a,{style:{height:480,width:270},item:!0},a.renderListAllCarouselItem(0,270,480)))}},a.renderListAllCarouselItem=function(e,t,n){return a.state.contents[e].map(function(i,r){var o=a.state.mediaCollection.map(function(e){return e.id}).indexOf(i.content);return"none"===i.transition?l.a.createElement(ba.a,{key:r,timeout:0,in:a.state.currentSlideIndex[e]===r},l.a.createElement(A.a,{square:!0,className:a.props.classes.mediaContainer,style:{height:n,width:t,display:"flex",justifyContent:"center",alignItems:"center"}},"video/mp4"===a.state.mediaCollection[o].type?l.a.createElement(Pt.a,{width:"100%",height:"100%",loop:!(a.state.contents[e].length>1),playing:a.state.currentSlideIndex[e]===r,url:a.state.mediaCollection[o].imageUrl,onEnded:function(){return a.toggleNextSlide(e)}}):l.a.createElement(Nt.a,{imgSize:"contain",imgSrc:a.state.mediaCollection[o].imageUrl}))):"fade"===i.transition?l.a.createElement(ba.a,{key:r,timeout:1e3,in:a.state.currentSlideIndex[e]===r},l.a.createElement(A.a,{square:!0,className:a.props.classes.mediaContainer,style:{height:n,width:t,display:"flex",justifyContent:"center",alignItems:"center"}},"video/mp4"===a.state.mediaCollection[o].type?l.a.createElement(Pt.a,{width:"100%",height:"100%",loop:!(a.state.contents[e].length>1),playing:a.state.currentSlideIndex[e]===r,url:a.state.mediaCollection[o].imageUrl,onEnded:function(){return a.toggleNextSlide(e)}}):l.a.createElement(Nt.a,{imgSize:"contain",imgSrc:a.state.mediaCollection[o].imageUrl}))):"zoom"===i.transition?l.a.createElement(ya.a,{key:r,timeout:1e3,in:a.state.currentSlideIndex[e]===r},l.a.createElement(A.a,{square:!0,className:a.props.classes.mediaContainer,style:{height:n,width:t,display:"flex",justifyContent:"center",alignItems:"center"}},"video/mp4"===a.state.mediaCollection[o].type?l.a.createElement(Pt.a,{width:"100%",height:"100%",loop:!(a.state.contents[e].length>1),playing:a.state.currentSlideIndex[e]===r,url:a.state.mediaCollection[o].imageUrl,onEnded:function(){return a.toggleNextSlide(e)}}):l.a.createElement(Nt.a,{imgSize:"contain",imgSrc:a.state.mediaCollection[o].imageUrl}))):"grow"===i.transition?l.a.createElement(Sa.a,{key:r,timeout:1e3,in:a.state.currentSlideIndex[e]===r},l.a.createElement(A.a,{square:!0,className:a.props.classes.mediaContainer,style:{height:n,width:t,display:"flex",justifyContent:"center",alignItems:"center"}},"video/mp4"===a.state.mediaCollection[o].type?l.a.createElement(Pt.a,{width:"100%",height:"100%",loop:!(a.state.contents[e].length>1),playing:a.state.currentSlideIndex[e]===r,url:a.state.mediaCollection[o].imageUrl,onEnded:function(){return a.toggleNextSlide(e)}}):l.a.createElement(Nt.a,{imgSize:"contain",imgSrc:a.state.mediaCollection[o].imageUrl}))):void 0})},a.onAddMediaClick=function(e){var t=Object(it.a)(a.state.contents);if(e.map(function(e,n){var l=t[a.state.currentContainer].map(function(e){return e.content}).indexOf(e),i=a.state.mediaCollection.map(function(e){return e.id}).indexOf(e);-1===l&&("video/mp4"===a.state.mediaCollection[i].type?t[a.state.currentContainer].push({duration:null,transition:"fade",content:e,type:a.state.mediaCollection[i].type}):t[a.state.currentContainer].push({duration:10,transition:"fade",content:e,type:a.state.mediaCollection[i].type}))}),"default"!==a.state.selectedTemplate){var n=[];a.state.templateCollection.map(function(e,l){e.id===a.state.selectedTemplate&&e.container.map(function(e,l){""==a.state.allContainer[l]&&l==a.state.currentContainer?n.push(t[a.state.currentContainer][0].content):n.push(a.state.allContainer[l])})}),a.setState({contents:t,openDialog:!1,allContainer:n,contentDuration:t[a.state.currentContainer][0].duration,transitionSelected:t[a.state.currentContainer][0].transition})}else{var l=[];l.push(t[a.state.currentContainer][0].content),a.setState({contents:t,openDialog:!1,allContainer:l,contentDuration:t[a.state.currentContainer][0].duration,transitionSelected:t[a.state.currentContainer][0].transition})}},a.handleCampaignNameChange=function(e){a.setState({campaignName:e.target.value})},a.handleSaveCampaign=function(){if("default"!==a.state.selectedTemplate){y.a.database().ref("template/"+a.state.selectedTemplate).once("value",function(e){var t=e.val(),n={name:""==a.state.campaignName?"default":a.state.campaignName,created:y.a.database.ServerValue.TIMESTAMP,content:a.state.contents,template:a.state.selectedTemplate,template_name:t.name},l={};l["/campaign/"+y.a.database().ref().child("campaign").push().key]=n,y.a.database().ref().update(l)})}else{var e={name:""==a.state.campaignName?"default":a.state.campaignName,created:y.a.database.ServerValue.TIMESTAMP,content:a.state.contents,template:a.state.selectedTemplate,template_name:"default"},t={};t["/campaign/"+y.a.database().ref().child("campaign").push().key]=e,y.a.database().ref().update(t)}a.props.handleTabsChangeIndex(0),a.setState({selectedTemplate:"default",contents:[[]],campaignName:"",allContainer:[],currentContainer:0,transitionSelected:"fade",contentDuration:0,currentSlideIndex:[0]})},a.onRemoveSortableListItem=function(){var e=a.state.checked,t=Object(it.a)(a.state.allContainer),n=Object(it.a)(a.state.contents);e.map(function(e){var l=n[a.state.currentContainer].map(function(e){return e.content}).indexOf(e);-1!==l&&n[a.state.currentContainer].splice(l,1),t[a.state.currentContainer]===e&&(t[a.state.currentContainer]="")}),a.setState({contents:n,checked:[],allContainer:t})},a.handleContentDurationChange=function(e){return function(t){var n=a.state.allContainer[a.state.currentContainer],l=a.state.contents[a.state.currentContainer].map(function(e){return e.content}).indexOf(n);-1!==l?t.target.value>=0?(a.state.contents[a.state.currentContainer][l].duration=t.target.value,a.setState(Object(L.a)({},e,t.target.value))):(a.state.contents[a.state.currentContainer][l].duration=0,a.setState(Object(L.a)({},e,0))):t.target.value>=0?a.setState(Object(L.a)({},e,t.target.value)):a.setState(Object(L.a)({},e,0))}},a.handleTransitionChange=function(e){var t=a.state.allContainer[a.state.currentContainer],n=a.state.contents[a.state.currentContainer].map(function(e){return e.content}).indexOf(t);-1!==n?(a.state.contents[a.state.currentContainer][n].transition=e.target.value,a.setState({transitionSelected:e.target.value})):a.setState({transitionSelected:e.target.value})},a.onPreviewClick=function(){a.setState({openDialog:!0,dialogOption:"preview",dialogTitle:"Preview",dialogTitleVisible:!1}),a.shiftSlide()},a.toggleSlide=function(e){return function(t){if(a.state.currentSlideIndex[e]<a.state.contents[e].length-1){var n=Object(it.a)(a.state.currentSlideIndex);n[e]=n[e]+1,a.setState({currentSlideIndex:n});var l=n[e];"video/mp4"!==a.state.contents[e][l].type&&a.loopSlide(e)}else{var i=Object(it.a)(a.state.currentSlideIndex);i[e]=0,a.setState({currentSlideIndex:i});var r=i[e];"video/mp4"!==a.state.contents[e][r].type&&a.loopSlide(e)}}},a.toggleNextSlide=function(e){if(a.state.currentSlideIndex[e]<a.state.contents[e].length-1){var t=Object(it.a)(a.state.currentSlideIndex);t[e]=t[e]+1,a.setState({currentSlideIndex:t});var n=t[e];"video/mp4"!==a.state.contents[e][n].type&&a.loopNextSlide(e,n)}else{var l=Object(it.a)(a.state.currentSlideIndex);l[e]=0,a.setState({currentSlideIndex:l});var i=l[e];"video/mp4"!==a.state.contents[e][i].type&&a.loopNextSlide(e,i)}},a.loopNextSlide=function(e,t){Na[e]=a.props.setTimeout(a.toggleSlide(e,a.state.contents[e].length),1e3*a.state.contents[e][t].duration)},a.loopSlide=function(e){Na[e]=a.props.setTimeout(a.toggleSlide(e,a.state.contents[e].length),1e3*a.state.contents[e][a.state.currentSlideIndex[e]].duration)},a.shiftSlide=function(){if("default"!==a.state.selectedTemplate){var e=a.state.templateCollection.map(function(e){return e.id}).indexOf(a.state.selectedTemplate);a.state.templateCollection[e].container.map(function(e,t){a.state.contents[t].length>1&&"video/mp4"!==a.state.contents[t][0].type&&(Na[t]=a.props.setTimeout(a.toggleSlide(t),1e3*a.state.contents[t][a.state.currentSlideIndex[t]].duration))})}else a.state.contents[0].length>1&&"video/mp4"!==a.state.contents[0][0].type&&(Na[0]=a.props.setTimeout(a.toggleSlide(0),1e3*a.state.contents[0][a.state.currentSlideIndex[0]].duration))},a.onClearClick=function(){a.setState({selectedTemplate:"default",contents:[[]],campaignName:"",allContainer:[],currentContainer:0,transitionSelected:"fade",contentDuration:0,currentSlideIndex:[0]})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this;y.a.database().ref("media").on("value",function(t){var a=[];t.forEach(function(e){var t=e.val();t.key=e.key,a.push({id:t.key,name:t.name,imageUrl:t.imageUrl,created:t.created,type:t.type,size:t.size,folder:t.folder})}),e.setState({mediaCollection:a})}),y.a.database().ref("media_folder").on("value",function(t){var a=[];t.forEach(function(e){var t=e.val();t.key=e.key,a.push({id:t.key,name:t.name,created:t.created,total:t.total})}),e.setState({folderCollection:a})}),y.a.database().ref("template").on("value",function(t){var a=[];t.forEach(function(e){var t=e.val();t.key=e.key,a.push({id:t.key,name:t.name,created:t.created,container:t.container})}),e.setState({templateCollection:a})})}},{key:"renderTransition",value:function(){return l.a.createElement(la.a,{container:!0},l.a.createElement(la.a,{item:!0,xs:3,style:{paddingRight:5}},l.a.createElement(F.a,{disabled:!(this.state.contents[this.state.currentContainer].length>0&&null!==this.state.contentDuration),fullWidth:!0,id:"outlined-number",label:"Duration",value:null===this.state.contentDuration?0:this.state.contentDuration,InputProps:{inputProps:{min:0,max:3600}},onChange:this.handleContentDurationChange("contentDuration"),type:"number",InputLabelProps:{shrink:!0},margin:"normal",variant:"outlined"})),l.a.createElement(la.a,{item:!0,xs:9,style:{paddingLeft:5}},l.a.createElement("form",{autoComplete:"off"},l.a.createElement(vt.a,{margin:"normal",fullWidth:!0,variant:"outlined"},l.a.createElement(Ct.a,{htmlFor:"outlined-age-simple"},"Transition"),l.a.createElement(kt.a,{disabled:!(this.state.contents[this.state.currentContainer].length>0),value:this.state.transitionSelected,onChange:this.handleTransitionChange,input:l.a.createElement(wt.a,{fullWidth:!0,labelWidth:100,name:"age",id:"outlined-age-simple"})},l.a.createElement(xt.a,{value:"none"},l.a.createElement("em",null,"None")),l.a.createElement(xt.a,{value:"fade"},"Fade"),l.a.createElement(xt.a,{value:"zoom"},"Zoom"),l.a.createElement(xt.a,{value:"grow"},"Grow"))))))}},{key:"render",value:function(){var e=this,t=this.props.classes;return l.a.createElement("div",{className:t.root},l.a.createElement(Ce.a,{onClose:this.handleClose,"aria-labelledby":"customized-dialog-title",open:this.state.openDialog,maxWidth:"xl"},this.state.dialogTitleVisible?l.a.createElement(ke.a,{id:"customized-dialog-title",onClose:this.handleClose},this.state.dialogTitle):l.a.createElement("div",null),this.renderDialog()),l.a.createElement(la.a,{style:{minHeight:Fa},container:!0},l.a.createElement(la.a,{style:{height:Fa,padding:10},item:!0,xs:3},l.a.createElement(vt.a,{style:{marginTop:10},fullWidth:!0,variant:"outlined"},l.a.createElement(Ct.a,{ref:function(t){e.InputLabelRef=t},htmlFor:"outlined-age-simple"},"Template"),l.a.createElement(kt.a,{value:this.state.selectedTemplate,onChange:this.handleTemplateChange,input:l.a.createElement(wt.a,{labelWidth:100,name:"folder",id:"outlined-age-simple"})},l.a.createElement(xt.a,{value:"default"},l.a.createElement("em",null,"Default")),this.state.templateCollection.map(function(e){return l.a.createElement(xt.a,{key:e.id,value:e.id},e.name)}))),l.a.createElement(la.a,{container:!0},this.state.checked.length>0?l.a.createElement(la.a,{container:!0},l.a.createElement(la.a,{item:!0,xs:9,style:{paddingRight:5}},l.a.createElement(D.a,{fullWidth:!0,style:{marginTop:10},variant:"outlined",color:"primary",onClick:function(){return e.setState({openDialog:!0,dialogOption:"addMedia",dialogTitle:"Add Media",dialogTitleVisible:!0})}},"Add File")),l.a.createElement(la.a,{item:!0,xs:3,style:{paddingLeft:5}},l.a.createElement(D.a,{fullWidth:!0,style:{marginTop:10},variant:"outlined",color:"secondary",onClick:function(){return e.onRemoveSortableListItem()}},"Delete")),this.renderTransition()):l.a.createElement(la.a,{container:!0},l.a.createElement(la.a,{item:!0,xs:12},l.a.createElement(D.a,{fullWidth:!0,style:{marginTop:10},variant:"outlined",color:"primary",onClick:function(){return e.setState({openDialog:!0,dialogOption:"addMedia",dialogTitle:"Add Media",dialogTitleVisible:!0})}},"Add File")),this.renderTransition())),l.a.createElement(la.a,{style:{height:Fa-205,position:"relative",overflow:"auto"},item:!0,xs:12},this.renderSortable())),l.a.createElement(la.a,{container:!0,alignItems:"center",justify:"center",style:{backgroundColor:"#efefef",height:Fa,padding:10},item:!0,xs:6},l.a.createElement(la.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"flex-start",style:{height:480,width:270,backgroundColor:"#262626"}},this.renderTemplate())),l.a.createElement(la.a,{style:{height:Fa,padding:10},item:!0,xs:3},l.a.createElement(la.a,{container:!0},l.a.createElement(la.a,{style:{paddingRight:5},item:!0,xs:4},l.a.createElement(D.a,{fullWidth:!0,style:{marginTop:10},variant:"outlined",color:"secondary",onClick:function(){return e.handleSaveCampaign()}},"Save")),l.a.createElement(la.a,{style:{paddingLeft:5,paddingRight:5},item:!0,xs:4},l.a.createElement(D.a,{fullWidth:!0,style:{marginTop:10},variant:"outlined",color:"default",onClick:function(){return e.onPreviewClick()}},"Preview")),l.a.createElement(la.a,{style:{paddingLeft:5},item:!0,xs:4},l.a.createElement(D.a,{fullWidth:!0,style:{marginTop:10},variant:"outlined",color:"default",onClick:function(){return e.onClearClick()}},"Clear"))),l.a.createElement(F.a,{fullWidth:!0,autoFocus:!0,margin:"dense",id:"standard-name",label:"Campaign Name",value:this.state.campaignName,onChange:this.handleCampaignNameChange}))))}}]),t}(n.Component),Ta=Object(wa.a)(Object(O.withStyles)(function(e){return{root:{width:"100%"},container:{border:"5px solid #f50057"},mediaContainer:{position:"absolute"}}}),xa.a)(ja);function Aa(e){return l.a.createElement(Ie.a,Object.assign({direction:"up"},e))}function Ia(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var Ba=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.onSelectAllClick,n=t.order,i=t.orderBy,r=t.numSelected,o=t.rowCount,c=t.rows;return l.a.createElement($.a,null,l.a.createElement(te.a,null,l.a.createElement(X.a,{padding:"checkbox"},l.a.createElement(oe.a,{indeterminate:r>0&&r<o,checked:r===o,onChange:a})),c.map(function(t){return l.a.createElement(X.a,{key:t.id,align:t.numeric?"right":"left",padding:t.disablePadding?"none":"default",sortDirection:i===t.id&&n},l.a.createElement(ue.a,{title:"Sort",disableTouchListener:!t.sortable,disableFocusListener:!t.sortable,disableHoverListener:!t.sortable,placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},l.a.createElement(ne.a,{active:!(i!==t.id||!t.sortable),direction:n,onClick:e.createSortHandler(t.id)},t.label)))},this)))}}]),t}(l.a.Component),Ra=function(e){var t=e.numSelected,a=e.classes,n=e.onDeleteAllClick,i=e.movefile;e.onAddCampaignClick;return l.a.createElement(ie.a,{className:q()(a.root,Object(L.a)({},a.highlight,t>0))},l.a.createElement("div",{className:a.title},t>0?l.a.createElement(j.a,{color:"inherit",variant:"subtitle1"},t," selected"):l.a.createElement(j.a,{variant:"h6",id:"tableTitle"})),l.a.createElement("div",{className:a.spacer}),l.a.createElement("div",{className:a.actions},t>0?i?l.a.createElement("div",{style:{display:"flex",alignItems:"center"}},l.a.createElement(ue.a,{title:"Delete"},l.a.createElement(de.a,{"aria-label":"Delete",onClick:n},l.a.createElement(pe.a,null)))):l.a.createElement(ue.a,{title:"Delete"},l.a.createElement(de.a,{"aria-label":"Delete",onClick:n},l.a.createElement(pe.a,null))):l.a.createElement("div",null)))};Ra=Object(O.withStyles)(function(e){return{root:{paddingRight:e.spacing.unit},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(me.lighten)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"}}})(Ra);function Ma(e){var t=e.children,a=e.dir;return l.a.createElement("div",{dir:a},t)}var Ua=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).state={order:"desc",orderBy:a.props.orderBy,selected:[],selectedId:"",page:0,rowsPerPage:5,openDialog:!1,dialogTitle:"No Title",folderId:"",folderName:"",dialogOption:"",selectedFileName:"",dialogFullscreen:!1,value:0},a.handleRequestSort=function(e,t){var n=t,l="desc";a.state.orderBy===t&&"desc"===a.state.order&&(l="asc"),a.setState({order:l,orderBy:n})},a.handleSelectAllClick=function(e){e.target.checked?a.setState({selected:a.props.data.map(function(e){return e.id})}):a.setState({selected:[]})},a.handleClick=function(e,t){var n=a.state.selected,l=n.indexOf(t),i=[];-1===l?i=i.concat(n,t):0===l?i=i.concat(n.slice(1)):l===n.length-1?i=i.concat(n.slice(0,-1)):l>0&&(i=i.concat(n.slice(0,l),n.slice(l+1))),a.setState({selected:i})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.isSelected=function(e){return-1!==a.state.selected.indexOf(e)},a.bytesToSize=function(e){if(0===e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]},a.onAddCampaignClick=function(){},a.onEditClick=function(e){},a.onDeleteClick=function(e){a.setState({openDialog:!0,dialogTitle:"Remove Campaign",selectedId:e,dialogOption:"delete",dialogFullscreen:!1})},a.onPreviewClick=function(e){},a.onDeleteAllClick=function(){a.setState({openDialog:!0,dialogOption:"deleteAll",dialogTitle:"Remove Campaign",dialogFullscreen:!1})},a.handleClose=function(){a.setState({openDialog:!1})},a._handleEditFileNameChange=function(e){a.setState({selectedFileName:e.target.value})},a.handleSelectionChange=function(e){a.setState({selectedFolder:e.target.value})},a.handleEditFile=function(){y.a.database().ref().child("/media_folder/"+a.state.selectedId).update({name:a.state.selectedFileName}),a.setState({openDialog:!1,selectedFolder:"default",selectedFileName:"",selected:[]})},a.handleRemoveFile=function(){y.a.database().ref(a.props.dataName).child(a.state.selectedId).remove(),a.setState({openDialog:!1,selectedId:"",selected:[]})},a.handleRemoveAllFile=function(){a.state.selected.forEach(function(e){y.a.database().ref(a.props.dataName).child(e).remove()}),a.setState({openDialog:!1,selected:[]})},a.renderDialog=function(){return"delete"===a.state.dialogOption?l.a.createElement("div",null,l.a.createElement(we.a,null,l.a.createElement(xe.a,{id:"alert-dialog-description"},"Are you sure you want to permanently delete these campaign?")),l.a.createElement(Pe.a,null,l.a.createElement(D.a,{onClick:a.handleRemoveFile,color:"default"},"Yes"),l.a.createElement(D.a,{color:"primary",onClick:a.handleClose},"No"))):"deleteAll"===a.state.dialogOption?l.a.createElement("div",null,l.a.createElement(we.a,null,l.a.createElement(xe.a,{id:"alert-dialog-description"},"Are you sure you want to permanently delete these campaign?")),l.a.createElement(Pe.a,null,l.a.createElement(D.a,{onClick:a.handleRemoveAllFile,color:"default"},"Yes"),l.a.createElement(D.a,{color:"primary",onClick:a.handleClose},"No"))):void 0},a.handleTabsChange=function(e,t){a.setState({value:t})},a.handleTabsChangeIndex=function(e){a.setState({value:e})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.rows,i=t.data,r=t.theme,o=this.state,c=o.order,d=o.orderBy,s=o.selected,u=o.rowsPerPage,m=o.page,h=u-Math.min(u,i.length-m*u);return l.a.createElement("div",{className:a.root},l.a.createElement(Te.a,{className:a.AppBar,position:"static",color:"default"},l.a.createElement(Ue.a,{value:this.state.value,onChange:this.handleTabsChange,indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},l.a.createElement(We.a,{disableRipple:!0,label:"Campaign List"}),l.a.createElement(We.a,{className:a.tab,disableRipple:!0,label:"Create Campaign"}),l.a.createElement(We.a,{className:a.tab,disableRipple:!0,disabled:!0,label:"Edit Campaign"}))),l.a.createElement(Ce.a,{fullScreen:this.state.dialogFullscreen,onClose:this.handleClose,"aria-labelledby":"customized-dialog-title",open:this.state.openDialog,maxWidth:"xl",TransitionComponent:Aa},this.state.dialogFullscreen?l.a.createElement(Te.a,{className:a.appBar},l.a.createElement(ie.a,null,l.a.createElement(de.a,{color:"inherit",onClick:this.handleClose,"aria-label":"Close"},l.a.createElement(Ne.a,null)),l.a.createElement(j.a,{variant:"h6",color:"inherit",className:a.flex},this.state.dialogTitle),l.a.createElement(D.a,{color:"inherit",onClick:this.handleClose},"save"))):l.a.createElement(ke.a,{id:"customized-dialog-title",onClose:this.handleClose},this.state.dialogTitle),this.renderDialog()),0===this.state.value&&l.a.createElement(Ma,{dir:r.direction},l.a.createElement(Ra,{numSelected:s.length,onDeleteAllClick:this.onDeleteAllClick,movefile:this.props.movefile,onAddCampaignClick:this.onAddCampaignClick}),l.a.createElement("div",{className:a.tableWrapper},l.a.createElement(V.a,{className:a.table,"aria-labelledby":"tableTitle"},l.a.createElement(Ba,{numSelected:s.length,order:c,orderBy:d,onSelectAllClick:this.handleSelectAllClick,onRequestSort:this.handleRequestSort,rowCount:i.length,rows:n}),l.a.createElement(G.a,null,function(e,t){var a=e.map(function(e,t){return[e,t]});return a.sort(function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]}),a.map(function(e){return e[0]})}(i,function(e,t){return"desc"===e?function(e,a){return Ia(e,a,t)}:function(e,a){return-Ia(e,a,t)}}(c,d)).slice(m*u,m*u+u).map(function(t){var i=e.isSelected(t.id);return l.a.createElement(te.a,{hover:!0,role:"checkbox","aria-checked":i,tabIndex:-1,key:t.id,selected:i},l.a.createElement(X.a,{onClick:function(a){return e.handleClick(a,t.id)},padding:"checkbox"},l.a.createElement(oe.a,{checked:i})),n.map(function(n){return n.action?l.a.createElement(X.a,{key:n.id,align:"left",padding:"none"},l.a.createElement("div",{className:a.actionButtons},l.a.createElement(de.a,{color:t.total>0?"primary":"default",disabled:!(t.total>0),onClick:function(){return e.onPreviewClick(t.id)}},l.a.createElement(ve.a,{fontSize:"small"})),l.a.createElement(de.a,{onClick:function(){return e.onEditClick(t.id)}},l.a.createElement(fe.a,{fontSize:"small"})),l.a.createElement(de.a,{onClick:function(){return e.onDeleteClick(t.id)}},l.a.createElement(pe.a,{fontSize:"small"})))):"created"===n.id?l.a.createElement(X.a,{key:n.id,onClick:function(a){return e.handleClick(a,t.id)},align:"left",padding:"default"},new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(t[n.id])):"template"===n.id?l.a.createElement(X.a,{key:n.id,onClick:function(a){return e.handleClick(a,t.id)},align:"left",padding:"default"},t.template_name):l.a.createElement(X.a,{key:n.id,onClick:function(a){return e.handleClick(a,t.id)},align:"left",padding:"default"},t[n.id])}))}),h>0&&l.a.createElement(te.a,{style:{height:49*h}},l.a.createElement(X.a,{colSpan:6}))))),l.a.createElement(Q.a,{rowsPerPageOptions:[5,10,25],component:"div",count:i.length,rowsPerPage:u,page:m,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage})),1===this.state.value&&l.a.createElement(Ma,{dir:r.direction},l.a.createElement(Ta,{handleTabsChangeIndex:this.handleTabsChangeIndex})),2===this.state.value&&l.a.createElement(Ma,{dir:r.direction},l.a.createElement(Ta,{handleTabsChangeIndex:this.handleTabsChangeIndex})))}}]),t}(l.a.Component),za=Object(O.withStyles)(function(e){return{root:{width:"100%"},table:{minWidth:1020},tableWrapper:{overflowX:"auto"},actionButtons:{display:"flex"},appBar:{position:"relative"},flex:{flex:1},AppBar:{boxShadow:"none",borderBottom:"1px solid #e8e8e8"},tab:{borderLeft:"1px solid #e8e8e8"}}},{withTheme:!0})(Ua),Wa=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).state={campaignData:[]},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this;y.a.database().ref("campaign").on("value",function(t){var a=[];t.forEach(function(e){var t=e.val();t.key=e.key,a.push({id:t.key,name:t.name,created:t.created,template:t.template,template_name:t.template_name})}),e.setState({campaignData:a})})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(za,{rows:[{id:"name",numeric:!1,disablePadding:!1,label:"Folder Name",sortable:!0},{id:"template",numeric:!1,disablePadding:!1,label:"Template",sortable:!0},{id:"created",numeric:!1,disablePadding:!1,label:"Created by",sortable:!0},{id:"action",numeric:!1,disablePadding:!1,sortable:!1,action:!0}],data:this.state.campaignData,orderBy:"created",movefile:!1,dataName:"campaign"}))}}]),t}(n.Component),La=function(e){function t(){return Object(o.a)(this,t),Object(d.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h2",null,"Networks"))}}]),t}(n.Component),_a=(a(5649),[]),qa=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).state={on:!1},a.toggle=function(){console.log("ff"),a.setState({on:!a.state.on})},a.handleClick=function(e){_a[0]=a.props.setTimeout(a.toggle,2e3)},a.handleClearClick=function(e){clearTimeout(_a[0]),_a[0]=null},a.checking=function(e){console.log(_a[0])},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{style:{width:"300px",height:"300px",overflow:"hidden"}},l.a.createElement("video",{style:{width:"100%"},autoPlay:!0,src:"http://download.blender.org/peach/bigbuckbunny_movies/BigBuckBunny_320x180.mp4",type:"video/mp4"}))}}]),t}(l.a.Component),Ha=xa()(qa),Va=a(124),Ya=a.n(Va),Ga=a(125),Ka=a.n(Ga);var Xa=Object(O.withStyles)(function(e){return{paper:{maxWidth:936,margin:"auto",overflow:"hidden",marginTop:20},searchBar:{borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},searchInput:{fontSize:e.typography.fontSize},block:{display:"block"},addUser:{marginRight:e.spacing.unit},contentWrapper:{margin:"40px 16px"}}})(function(e){var t=e.classes;return l.a.createElement(A.a,{className:t.paper},l.a.createElement(Te.a,{className:t.searchBar,position:"static",color:"default",elevation:0},l.a.createElement(ie.a,null,l.a.createElement(la.a,{container:!0,spacing:16,alignItems:"center"},l.a.createElement(la.a,{item:!0},l.a.createElement(Ya.a,{className:t.block,color:"inherit"})),l.a.createElement(la.a,{item:!0,xs:!0},l.a.createElement(F.a,{fullWidth:!0,placeholder:"Search by email address, phone number, or user UID",InputProps:{disableUnderline:!0,className:t.searchInput}})),l.a.createElement(la.a,{item:!0},l.a.createElement(D.a,{variant:"contained",color:"primary",className:t.addUser},"Add user"),l.a.createElement(ue.a,{title:"Reload"},l.a.createElement(de.a,null,l.a.createElement(Ka.a,{className:t.block,color:"inherit"}))))))),l.a.createElement("div",{className:t.contentWrapper},l.a.createElement(j.a,{color:"textSecondary",align:"center"},"No users for this project yet")))}),Za=function(e){function t(){return Object(o.a)(this,t),Object(d.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement(m.a,{to:"/digital-signage"})}}]),t}(n.Component),$a=a(224),Ja=a.n($a),Qa=a(223),en=a.n(Qa),tn=a(126),an=a.n(tn),nn=a(127),ln=a.n(nn),rn=a(128),on=a.n(rn),cn=a(150),dn=a.n(cn),sn=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).state={open:!1,appBarTitle:"Dashboard"},a.handleDrawerOpen=function(){a.setState({open:!0})},a.handleDrawerClose=function(){a.setState({open:!1})},a.navigateScreen=function(e){0===e||k.auth().signOut()},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.theme,i=this.state.open,r=[l.a.createElement(st.c,null),l.a.createElement(st.l,null),l.a.createElement(st.g,null),l.a.createElement(st.i,null),l.a.createElement(st.m,null),l.a.createElement(st.b,null),l.a.createElement(st.e,null),l.a.createElement(st.h,null)],o=[l.a.createElement(st.j,null),l.a.createElement(st.d,null)];return l.a.createElement("div",{className:a.root},l.a.createElement(en.a,null),l.a.createElement(Te.a,{position:"fixed",className:q()(a.appBar,Object(L.a)({},a.appBarShift,i))},l.a.createElement(ie.a,{disableGutters:!i},l.a.createElement(de.a,{color:"inherit","aria-label":"Open drawer",onClick:this.handleDrawerOpen,className:q()(a.menuButton,i&&a.hide)},l.a.createElement(an.a,null)),l.a.createElement(j.a,{variant:"h6",color:"inherit",noWrap:!0},this.state.appBarTitle))),l.a.createElement(Ja.a,{className:a.drawer,variant:"persistent",anchor:"left",open:i,classes:{paper:a.drawerPaper}},l.a.createElement("div",{className:a.drawerHeader},l.a.createElement(de.a,{onClick:this.handleDrawerClose},"ltr"===n.direction?l.a.createElement(ln.a,null):l.a.createElement(on.a,null))),l.a.createElement(ga.a,null),l.a.createElement(da.a,null,["Dashboard","Stations","Contents","Templates","Campaigns","Networks","Reports","Admin"].map(function(t,a){return l.a.createElement(ua.a,{button:!0,component:h.b,to:"Dashboard"===t?"/digital-signage":"/digital-signage/"+t.toLowerCase(),key:t,onClick:function(){return e.setState({open:!1,appBarTitle:t})}},l.a.createElement(dn.a,null,r[a]),l.a.createElement(ha.a,{primary:l.a.createElement(j.a,{style:{fontWeight:"500",color:"#4d4c4c"}},t)}))})),l.a.createElement(ga.a,null),l.a.createElement(da.a,null,["Settings","Log Out"].map(function(t,a){return l.a.createElement(ua.a,{button:!0,key:t,onClick:function(){return e.navigateScreen(a)}},l.a.createElement(dn.a,null,o[a]),l.a.createElement(ha.a,{primary:l.a.createElement(j.a,{style:{fontWeight:"500",color:"#4d4c4c"}},t)}))}))),l.a.createElement("main",{className:q()(a.content,Object(L.a)({},a.contentShift,i))},l.a.createElement("div",{className:a.drawerHeader}),this.props.components))}}]),t}(n.Component),un=Object(O.withStyles)(function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(200,"px)"),marginLeft:200,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:20},hide:{display:"none"},drawer:{width:200,flexShrink:0},drawerPaper:{width:200},drawerHeader:Object(b.a)({display:"flex",alignItems:"center",padding:"0 8px"},e.mixins.toolbar,{justifyContent:"flex-end"}),content:{flexGrow:1,padding:0,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-200},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}},{withTheme:!0})(sn),mn=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).state={loading:!0,authenticated:!1,user:null},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this;k.auth().onAuthStateChanged(function(t){t?e.setState({authenticated:!0,currentUser:t,loading:!1}):e.setState({authenticated:!1,currentUser:null,loading:!1})})}},{key:"renderRoute",value:function(){return l.a.createElement(m.d,null,l.a.createElement(m.b,{path:"/digital-signage",component:W,exact:!0}),l.a.createElement(m.b,{path:"/digital-signage/stations",component:Ke}),l.a.createElement(m.b,{path:"/digital-signage/contents",component:Kt}),l.a.createElement(m.b,{path:"/digital-signage/templates",component:aa}),l.a.createElement(m.b,{path:"/digital-signage/campaigns",component:Wa}),l.a.createElement(m.b,{path:"/digital-signage/networks",component:La}),l.a.createElement(m.b,{path:"/digital-signage/reports",component:Ha}),l.a.createElement(m.b,{path:"/digital-signage/admin",component:Xa}),l.a.createElement(m.b,{component:Za}))}},{key:"render",value:function(){var e=this.state,t=e.authenticated;return e.loading?l.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"}},l.a.createElement(g.a,{color:"primary"})):t?l.a.createElement(h.a,null,l.a.createElement("div",null,l.a.createElement(un,{components:this.renderRoute()}))):l.a.createElement(h.a,null,l.a.createElement("div",null,l.a.createElement(m.d,null,l.a.createElement(m.b,{path:"/digital-signage",component:B,exact:!0}),l.a.createElement(m.b,{path:"/digital-signage/register",component:M}),l.a.createElement(m.b,{path:"/digital-signage/forgotpassword",component:z}),l.a.createElement(m.b,{component:Za}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(mn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[5424,1,2]]]);
//# sourceMappingURL=main.af822b61.chunk.js.map